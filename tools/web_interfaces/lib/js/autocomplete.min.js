function autocomplete(e,t){var n;function i(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),n>=e.length&&(n=0),n<0&&(n=e.length-1),e[n].classList.add("autocomplete-active")}function a(t){for(var n=document.getElementsByClassName("autocomplete-items"),i=0;i<n.length;i++)t!=n[i]&&t!=e&&n[i].parentNode.removeChild(n[i])}e.addEventListener("input",function(i){var r,o,l,s=this.value;if(a(),!s)return!1;for(n=-1,(r=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),r.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(r),l=0;l<t.length;l++)t[l].label.toUpperCase().indexOf(s.toUpperCase())>-1&&((o=document.createElement("DIV")).innerHTML+=createHighlightItem(t[l].label,s),o.innerHTML+="<input type='hidden' value='"+t[l].label+"' name='"+t[l].value+"'>",o.addEventListener("click",function(t){visualizzaAjaxStatus(),window.location=this.getElementsByTagName("input")[0].name,e.value=this.getElementsByTagName("input")[0].value,a()}),r.appendChild(o))}),e.addEventListener("keydown",function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(n++,i(t)):38==e.keyCode?(n--,i(t)):13==e.keyCode&&(e.preventDefault(),n>-1&&t&&t[n].click())}),document.addEventListener("click",function(e){a(e.target)})}function createHighlightItem(e,t){for(var n=occurrences(e,e.toUpperCase(),t.toUpperCase()),i="",a=0;a<n.length;a++){var r=n[a];r.highlight&&(i+="<strong>"),i+=r.originText,r.highlight&&(i+="</strong>")}return i}function occurrences(e,t,n){var i=[];if(t+="",(n+="").length<=0)return i;for(var a=0,r=0,o=n.length;;){var l="",s="",u=!1;if(!((r=t.indexOf(n,a))>=0)){var c;if(l=t.substr(a),s=e.substr(a),l)(c={}).text=l,c.highlight=u,c.originText=s,i.push(c);break}r==a?(l=t.substr(a,o),s=e.substr(a,o),a+=o,u=!0):(l=t.substr(a,r-a),s=e.substr(a,r-a),a=r),l&&((c={}).text=l,c.highlight=u,c.originText=s,i.push(c))}return i}