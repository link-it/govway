function autocomplete(e,t){var n;function i(e){if(!e)return!1;(function e(t){for(var n=0;n<t.length;n++)t[n].classList.remove("autocomplete-active")})(e),n>=e.length&&(n=0),n<0&&(n=e.length-1),e[n].classList.add("autocomplete-active")}function r(t){for(var n=document.getElementsByClassName("autocomplete-items"),i=0;i<n.length;i++)t!=n[i]&&t!=e&&n[i].parentNode.removeChild(n[i])}e.addEventListener("input",function(i){var a,l,s,o=this.value;if(r(),!o)return!1;for(n=-1,(a=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),a.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(a),s=0;s<t.length;s++)t[s].label.toUpperCase().indexOf(o.toUpperCase())>-1&&(l=document.createElement("DIV"),l.innerHTML+=createHighlightItem(t[s].label,o),l.innerHTML+="<input type='hidden' value='"+t[s].label+"' name='"+t[s].value+"'>",l.addEventListener("click",function(t){visualizzaAjaxStatus(),window.location=this.getElementsByTagName("input")[0].name,e.value=this.getElementsByTagName("input")[0].value,r()}),a.appendChild(l))}),e.addEventListener("keydown",function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(n++,i(t)):38==e.keyCode?(n--,i(t)):13==e.keyCode&&(e.preventDefault(),n>-1&&t&&t[n].click())}),document.addEventListener("click",function(e){r(e.target)})}function createHighlightItem(e,t){for(var n=occurrences(e,e.toUpperCase(),t.toUpperCase()),i="",r=0;r<n.length;r++){var a=n[r];a.highlight&&(i+="<strong>"),i+=a.originText,a.highlight&&(i+="</strong>")}return i}function occurrences(e,t,n){var i=[];if(t+="",(n+="").length<=0)return i;for(var r=0,a=0,l=n.length;;){a=t.indexOf(n,r);var s="",o="",u=!1;if(a>=0){if(a==r?(s=t.substr(r,l),o=e.substr(r,l),r+=l,u=!0):(s=t.substr(r,a-r),o=e.substr(r,a-r),r=a),s){var c={};c.text=s,c.highlight=u,c.originText=o,i.push(c)}}else{if(s=t.substr(r),o=e.substr(r),s){var c={};c.text=s,c.highlight=u,c.originText=o,i.push(c)}break}}return i}