if(!window.jQuery)throw new Error("jQuery plugin is required!");const mouseButton={LEFT:1,MIDDLE:2,RIGHT:3};!function(t){var n=!1,e={x:0,y:0},i={width:0,height:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0};function o(t,e){if(e=void 0!==e&&e,!t)throw new Error("data parameter is required!");var i="jquery.context-menu: ";if(e)throw new Error(i+t+"");return n&&console.log("%c"+i+"%c"+t+"%c","background-color: aqua; color: black; font-weight: bold; margin-right: 8px;","",""),t}t.fn.contextMenuOpenAnimation=function(n){n=void 0!==n?n:function(){};var o,s={left:e.x,top:e.y};s.left+t(this).outerWidth(!0)>t(window).width()&&(s.left=t(window).width()-t(this).outerWidth(!0)),s.top+t(this).outerHeight(!0)>t(window).height()&&(s.top=t(window).height()-t(this).outerHeight(!0)-40),i.height>t(window).height()?(s.top=2,t(this).css("height",t(window).height()-40)):t(this).css("height","unset"),t(this).css("display","block"),t(this).css("padding","0"),t(this).css("opacity","0"),t(this).css("z-index",(o=0,t("*").each(function(){var n=parseInt(t(this).css("z-index"));n>o&&(o=n)}),o+1)),t(this).css("top",s.top),t(this).css("left",s.left),t(this).animate({"padding-top":i.paddingTop,"padding-bottom":i.paddingBottom,"padding-left":i.paddingLeft,"padding-right":i.paddingRight,opacity:1},150,function(){n()})},t.fn.contextMenuCloseAnimation=function(n){n=void 0!==n?n:function(){},t(this).animate({"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,opacity:0},150,function(){t(this).css("display","none"),n()})},t.fn.contextMenu=function(){o("Context menu created.");var n=this,s=[],u=t('<div class="context-menu"></div>');return t(window).mousemove(function(n){e={x:n.pageX-t(window).scrollLeft(),y:n.pageY-t(window).scrollTop()}}),{button:mouseButton.RIGHT,menu:function(){var n=this;return{items:s,addItem:function(t,e){if(e=void 0!==e?e:function(){},o("Adding new item to context menu."),"function"!=typeof e&&"string"==typeof e){var i=e;e=function(){window.location.href=i},o("Item trigger is a link.")}else"function"!=typeof e&&o('The "click" variable can only be a function or string!',!0);return s.push({text:t,click:e}),o("Added a new item in to context menu."),n.items=s},removeItem:function(t){o("Removing a item ("+t+") in to context menu items.");var e=[];return n.items.forEach(function(n,i){t!==i&&e.push(n)}),o("Removed a item ("+t+") in to context menu items."),s=e,n.items=s},element:function(){o("Generating context menu HTML.");var e=t("<ul></ul>");return u.html(""),u.append(e),n.items.forEach(function(i,o){var s=t("<a></a>");s.html(i.text),s.on("click",function(t){i.click(),n.onclick()}),e.append(t("<li></li>").append(s))}),o("Generated context menu HTML."),u}}},open:function(n){n=void 0!==n?n:function(){},o("Opening context menu."),t(".context-menu").each(function(){"none"!==t(this).css("display")&&t(this).contextMenuCloseAnimation()}),u.contextMenuOpenAnimation(n()),this.onopen()},close:function(t){t=void 0!==t?t:function(){};var n=this;o("Closing context menu."),u.contextMenuCloseAnimation(function(){n.update(),t()}),this.onclose()},onopen:function(){o("Context menu openned.")},onclose:function(){o("Context menu closed.")},onclick:function(){this.close()},init:function(){var e=this;o("Initializing context menu."),this.button||o("Button parameter is required!",!0),this.menu().items.length<1&&o("No any items added!",!0),t("body").append(this.menu().element),this.menu().element().hide(),i={width:this.menu().element().outerWidth(!0),height:this.menu().element().outerHeight(!0),paddingTop:this.menu().element().css("padding-top"),paddingBottom:this.menu().element().css("padding-bottom"),paddingLeft:this.menu().element().css("padding-left"),paddingRight:this.menu().element().css("padding-right")},n.mousedown(function(n){o("Trigger element clicked."),o("Triggered mouse button: "+n.which+", Required mouse button: "+e.button),n.stopPropagation(),t(".context-menu").each(function(){t(this)!==u&&"none"!==t(this).css("display")&&t(this).contextMenuCloseAnimation()}),n.which!==e.button?e.close():"none"!==u.css("display")?e.close(function(){e.open()}):e.open()}),n.contextMenu(function(){return!1}),this.menu().element().mouseleave(function(){o("Mouse fuori dal menu"),t(this).delay(1e3).contextMenuCloseAnimation()}),t(document).mousedown(function(n){var i=t(n.target),o=i.attr("tagName"),s=!0;"A"===o&&"LI"===i.parent().attr("tagName")&&"UL"===i.parent().parent().attr("tagName")&&i.parent().parent().parent().hasClass("context-menu")&&(s=!1),"LI"===o&&"UL"===i.parent().attr("tagName")&&i.parent().parent().hasClass("context-menu")&&(s=!1),"UL"===o&&i.parent().hasClass("context-menu")&&(s=!1),i.hasClass("context-menu")&&(s=!1),s&&e.close()}),t(document).keyup(function(n){27===n.keyCode&&t(".context-menu").each(function(){"none"!==t(this).css("display")&&t(this).contextMenuCloseAnimation()})})},update:function(){o("Updating context menu."),t("body").append(this.menu().element),this.menu().element().hide()}}},t.autoInitializeContextMenus=function(){t(".context-menu-trigger").each(function(){if(o("Founded a HTML trigger."),t(this).has(".context-menu-content"))if(t(this).children(".context-menu-content").has("li a")){var n=t(this).contextMenu();t(this).hasClass("context-menu-button-right")?n.button=mouseButton.RIGHT:t(this).hasClass("context-menu-button-middle")?n.button=mouseButton.MIDDLE:n.button=mouseButton.LEFT,t(this).children(".context-menu-content").children("li").each(function(){if(t(this).has("a")){var e,i=t(this).children("a").first(),o=null;e=i.html(),void 0!==(o=i.attr("href"))&&!1!==o||(o=new Function(i.attr("onclick"))),n.menu().addItem(e,o)}}),n.init()}else o("This trigger content not have a any items.");else o("This trigger not have a content.")})}}(jQuery),$(document).ready(function(){$.autoInitializeContextMenus()});