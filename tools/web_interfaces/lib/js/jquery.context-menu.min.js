if(!window.jQuery)throw Error("jQuery plugin is required!");var mouseButton={LEFT:1,MIDDLE:2,RIGHT:3};!function(t){var n={x:0,y:0},e={width:0,height:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0};function i(t,n){if(n=void 0!==n&&n,!t)throw Error("data parameter is required!");if(n)throw Error("jquery.context-menu: "+t);return t}t.fn.contextMenuOpenAnimation=function(i){i=void 0!==i?i:function(){};var o,s={left:n.x,top:n.y};s.left+t(this).outerWidth(!0)>t(window).width()&&(s.left=t(window).width()-t(this).outerWidth(!0)),s.top+t(this).outerHeight(!0)>t(window).height()&&(s.top=t(window).height()-t(this).outerHeight(!0)-40),e.height>t(window).height()?(s.top=2,t(this).css("height",t(window).height()-40)):t(this).css("height","unset"),t(this).css("display","block"),t(this).css("padding","0"),t(this).css("opacity","0"),t(this).css("z-index",(o=0,t("*").each(function(){var n=parseInt(t(this).css("z-index"));n>o&&(o=n)}),o+1)),t(this).css("top",s.top),t(this).css("left",s.left),t(this).animate({"padding-top":e.paddingTop,"padding-bottom":e.paddingBottom,"padding-left":e.paddingLeft,"padding-right":e.paddingRight,opacity:1},150,function(){i()})},t.fn.contextMenuCloseAnimation=function(n){n=void 0!==n?n:function(){},t(this).animate({"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,opacity:0},150,function(){t(this).css("display","none"),n()})},t.fn.contextMenu=function(){i("Context menu created.");var o=this,s=[],u=t('<div class="context-menu"></div>');return t(window).mousemove(function(e){n={x:e.pageX-t(window).scrollLeft(),y:e.pageY-t(window).scrollTop()}}),{button:mouseButton.RIGHT,menu:function(){var n=this;return{items:s,addItem:function(t,e){if(e=void 0!==e?e:function(){},i("Adding new item to context menu."),"function"!=typeof e&&"string"==typeof e){var o=e;e=function(){window.location.href=o},i("Item trigger is a link.")}else"function"!=typeof e&&i('The "click" variable can only be a function or string!',!0);return s.push({text:t,click:e}),i("Added a new item in to context menu."),n.items=s},removeItem:function(t){i("Removing a item ("+t+") in to context menu items.");var e=[];return n.items.forEach(function(n,i){t!==i&&e.push(n)}),i("Removed a item ("+t+") in to context menu items."),s=e,n.items=s},element:function(){i("Generating context menu HTML.");var e=t("<ul></ul>");return u.html(""),u.append(e),n.items.forEach(function(i,o){var s=t("<a></a>");s.html(i.text),s.on("click",function(t){i.click(),n.onclick()}),e.append(t("<li></li>").append(s))}),i("Generated context menu HTML."),u}}},open:function(n){n=void 0!==n?n:function(){},i("Opening context menu."),t(".context-menu").each(function(){"none"!==t(this).css("display")&&t(this).contextMenuCloseAnimation()}),u.contextMenuOpenAnimation(n()),this.onopen()},close:function(t){t=void 0!==t?t:function(){};var n=this;i("Closing context menu."),u.contextMenuCloseAnimation(function(){n.update(),t()}),this.onclose()},onopen:function(){i("Context menu openned.")},onclose:function(){i("Context menu closed.")},onclick:function(){this.close()},init:function(){var n=this;i("Initializing context menu."),this.button||i("Button parameter is required!",!0),this.menu().items.length<1&&i("No any items added!",!0),t("body").append(this.menu().element),this.menu().element().hide(),e={width:this.menu().element().outerWidth(!0),height:this.menu().element().outerHeight(!0),paddingTop:this.menu().element().css("padding-top"),paddingBottom:this.menu().element().css("padding-bottom"),paddingLeft:this.menu().element().css("padding-left"),paddingRight:this.menu().element().css("padding-right")},o.mousedown(function(e){i("Trigger element clicked."),i("Triggered mouse button: "+e.which+", Required mouse button: "+n.button),e.stopPropagation(),t(".context-menu").each(function(){t(this)!==u&&"none"!==t(this).css("display")&&t(this).contextMenuCloseAnimation()}),e.which!==n.button?n.close():"none"!==u.css("display")?n.close(function(){n.open()}):n.open()}),o.contextMenu(function(){return!1}),this.menu().element().mouseleave(function(){i("Mouse fuori dal menu"),t(this).delay(1e3).contextMenuCloseAnimation()}),t(document).mousedown(function(e){var i=t(e.target),o=i.attr("tagName"),s=!0;"A"===o&&"LI"===i.parent().attr("tagName")&&"UL"===i.parent().parent().attr("tagName")&&i.parent().parent().parent().hasClass("context-menu")&&(s=!1),"LI"===o&&"UL"===i.parent().attr("tagName")&&i.parent().parent().hasClass("context-menu")&&(s=!1),"UL"===o&&i.parent().hasClass("context-menu")&&(s=!1),i.hasClass("context-menu")&&(s=!1),s&&n.close()}),t(document).keyup(function(n){27===n.keyCode&&t(".context-menu").each(function(){"none"!==t(this).css("display")&&t(this).contextMenuCloseAnimation()})})},update:function(){i("Updating context menu."),t("body").append(this.menu().element),this.menu().element().hide()}}},t.autoInitializeContextMenus=function(){t(".context-menu-trigger").each(function(){if(i("Founded a HTML trigger."),t(this).has(".context-menu-content")){if(t(this).children(".context-menu-content").has("li a")){var n=t(this).contextMenu();t(this).hasClass("context-menu-button-right")?n.button=mouseButton.RIGHT:t(this).hasClass("context-menu-button-middle")?n.button=mouseButton.MIDDLE:n.button=mouseButton.LEFT,t(this).children(".context-menu-content").children("li").each(function(){if(t(this).has("a")){var e=t(this).children("a").first(),i=null,o=null;i=e.html(),void 0!==(o=e.attr("href"))&&!1!==o||(o=Function(e.attr("onclick"))),n.menu().addItem(i,o)}}),n.init()}else i("This trigger content not have a any items.")}else i("This trigger not have a content.")})}}(jQuery),$(document).ready(function(){$.autoInitializeContextMenus()});