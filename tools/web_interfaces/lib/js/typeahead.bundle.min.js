!function(t,e){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(n){return t.Bloodhound=e(n)}):"object"==typeof exports?module.exports=e(require("jquery")):t.Bloodhound=e(jQuery)}(this,function(t){var e={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!!(t&&1===t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function t(n){return e.isUndefined(n)||null===n?"":n+""},bind:t.proxy,each:function(e,n){t.each(e,i);function i(t,e){return n(e,t)}},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,s){if(!(i=n.call(null,s,t,e)))return!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,s){if(i=n.call(null,s,t,e))return!1}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function e(n){return t.isFunction(n)?n:function t(){return String(n)}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,s;return function(){var r,o,u=this,a=arguments;return r=function(){i=null,n||(s=t.apply(u,a))},o=n&&!i,clearTimeout(i),i=setTimeout(r,e),o&&(s=t.apply(u,a)),s}},throttle:function(t,e){var n,i,s,r,o,u;return o=0,u=function(){o=new Date,s=null,r=t.apply(n,i)},function(){var a=new Date,c=e-(a-o);return n=this,i=arguments,c<=0?(clearTimeout(s),s=null,o=a,r=t.apply(n,i)):s||(s=setTimeout(u,c)),r}},stringify:function(t){return e.isString(t)?t:JSON.stringify(t)},noop:function(){}},n=function(){"use strict";return{nonword:n,whitespace:t,obj:{nonword:i(n),whitespace:i(t)}};function t(t){return(t=e.toStr(t))?t.split(/\s+/):[]}function n(t){return(t=e.toStr(t))?t.split(/\W+/):[]}function i(t){return function n(i){return i=e.isArray(i)?i:[].slice.call(arguments,0),function n(s){var r=[];return e.each(i,function(n){r=r.concat(t(e.toStr(s[n])))}),r}}}}(),i=function(){"use strict";function n(n){this.maxSize=e.isNumber(n)?n:100,this.reset(),this.maxSize<=0&&(this.set=this.get=t.noop)}function i(){this.head=this.tail=null}function s(t,e){this.key=t,this.val=e,this.prev=this.next=null}return e.mixin(n.prototype,{set:function t(e,n){var i,r=this.list.tail;this.size>=this.maxSize&&(this.list.remove(r),delete this.hash[r.key],this.size--),(i=this.hash[e])?(i.val=n,this.list.moveToFront(i)):(i=new s(e,n),this.list.add(i),this.hash[e]=i,this.size++)},get:function t(e){var n=this.hash[e];if(n)return this.list.moveToFront(n),n.val},reset:function t(){this.size=0,this.hash={},this.list=new i}}),e.mixin(i.prototype,{add:function t(e){this.head&&(e.next=this.head,this.head.prev=e),this.head=e,this.tail=this.tail||e},remove:function t(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),n}(),s=function(){"use strict";var n;try{(n=window.localStorage).setItem("~~~","!"),n.removeItem("~~~")}catch(i){n=null}function s(t,i){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=RegExp("^"+e.escapeRegExChars(this.prefix)),this.ls=i||n,this.ls||this._noop()}return e.mixin(s.prototype,{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=e.noop},_safeSet:function(t,e){try{this.ls.setItem(t,e)}catch(n){"QuotaExceededError"===n.name&&(this.clear(),this._noop())}},get:function(t){return this.isExpired(t)&&this.remove(t),u(this.ls.getItem(this._prefix(t)))},set:function(t,n,i){return e.isNumber(i)?this._safeSet(this._ttlKey(t),o(r()+i)):this.ls.removeItem(this._ttlKey(t)),this._safeSet(this._prefix(t),o(n))},remove:function(t){return this.ls.removeItem(this._ttlKey(t)),this.ls.removeItem(this._prefix(t)),this},clear:function(){var t,e=function t(e){var i,s,r=[],o=n.length;for(i=0;i<o;i++)(s=n.key(i)).match(e)&&r.push(s.replace(e,""));return r}(this.keyMatcher);for(t=e.length;t--;)this.remove(e[t]);return this},isExpired:function(t){var n=u(this.ls.getItem(this._ttlKey(t)));return!!(e.isNumber(n)&&r()>n)}}),s;function r(){return new Date().getTime()}function o(t){return JSON.stringify(e.isUndefined(t)?null:t)}function u(e){return t.parseJSON(e)}}(),r=function(){"use strict";var n=0,s={},r=6,o=new i(10);function u(t){t=t||{},this.cancelled=!1,this.lastReq=null,this._send=t.transport,this._get=t.limiter?t.limiter(this._get):this._get,this._cache=!1===t.cache?new i(0):o}return u.setMaxPendingRequests=function t(e){r=e},u.resetCache=function t(){o.reset()},e.mixin(u.prototype,{_fingerprint:function e(n){return(n=n||{}).url+n.type+t.param(n.data||{})},_get:function(t,e){var i,o,u=this;function a(t){e(null,t),u._cache.set(i,t)}function c(){e(!0)}i=this._fingerprint(t),!this.cancelled&&i===this.lastReq&&((o=s[i])?o.done(a).fail(c):n<r?(n++,s[i]=this._send(t).done(a).fail(c).always(function t(){n--,delete s[i],u.onDeckRequestArgs&&(u._get.apply(u,u.onDeckRequestArgs),u.onDeckRequestArgs=null)})):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(n,i){var s,r;i=i||t.noop,n=e.isString(n)?{url:n}:n||{},r=this._fingerprint(n),this.cancelled=!1,this.lastReq=r,(s=this._cache.get(r))?i(null,s):this._get(n,i)},cancel:function(){this.cancelled=!0}}),u}(),o=window.SearchIndex=function(){"use strict";function n(n){(n=n||{}).datumTokenizer&&n.queryTokenizer||t.error("datumTokenizer and queryTokenizer are both required"),this.identify=n.identify||e.stringify,this.datumTokenizer=n.datumTokenizer,this.queryTokenizer=n.queryTokenizer,this.reset()}return e.mixin(n.prototype,{bootstrap:function t(e){this.datums=e.datums,this.trie=e.trie},add:function(t){var n=this;t=e.isArray(t)?t:[t],e.each(t,function(t){var r,o;n.datums[r=n.identify(t)]=t,o=i(n.datumTokenizer(t)),e.each(o,function(t){var e,i,o;for(e=n.trie,i=t.split("");o=i.shift();)(e=e.c[o]||(e.c[o]=s())).i.push(r)})})},get:function t(n){var i=this;return e.map(n,function(t){return i.datums[t]})},search:function t(n){var s,r,o=this;return s=i(this.queryTokenizer(n)),e.each(s,function(t){var e,n,i,s;if(r&&0===r.length)return!1;for(e=o.trie,n=t.split("");e&&(i=n.shift());)e=e.c[i];if(!e||0!==n.length)return r=[],!1;s=e.i.slice(0),r=r?function t(e,n){var i=0,s=0,r=[];e=e.sort(),n=n.sort();for(var o=e.length,u=n.length;i<o&&s<u;)e[i]<n[s]?i++:(e[i]>n[s]||(r.push(e[i]),i++),s++);return r}(r,s):s}),r?e.map(function t(e){for(var n={},i=[],s=0,r=e.length;s<r;s++)n[e[s]]||(n[e[s]]=!0,i.push(e[s]));return i}(r),function(t){return o.datums[t]}):[]},all:function t(){var e=[];for(var n in this.datums)e.push(this.datums[n]);return e},reset:function t(){this.datums={},this.trie=s()},serialize:function t(){return{datums:this.datums,trie:this.trie}}}),n;function i(t){return t=e.filter(t,function(t){return!!t}),t=e.map(t,function(t){return t.toLowerCase()})}function s(){var t={};return t.i=[],t.c={},t}}(),u=function(){"use strict";var t;function n(t){this.url=t.url,this.ttl=t.ttl,this.cache=t.cache,this.prepare=t.prepare,this.transform=t.transform,this.transport=t.transport,this.thumbprint=t.thumbprint,this.storage=new s(t.cacheKey)}return t={data:"data",protocol:"protocol",thumbprint:"thumbprint"},e.mixin(n.prototype,{_settings:function t(){return{url:this.url,type:"GET",dataType:"json"}},store:function e(n){this.cache&&(this.storage.set(t.data,n,this.ttl),this.storage.set(t.protocol,location.protocol,this.ttl),this.storage.set(t.thumbprint,this.thumbprint,this.ttl))},fromCache:function e(){var n,i={};return this.cache?(i.data=this.storage.get(t.data),i.protocol=this.storage.get(t.protocol),i.thumbprint=this.storage.get(t.thumbprint),n=i.thumbprint!==this.thumbprint||i.protocol!==location.protocol,i.data&&!n?i.data:null):null},fromNetwork:function(t){var e,n=this;t&&(e=this.prepare(this._settings()),this.transport(e).fail(function e(){t(!0)}).done(function e(i){t(null,n.transform(i))}))},clear:function t(){return this.storage.clear(),this}}),n}(),a=function(){"use strict";function t(t){this.url=t.url,this.prepare=t.prepare,this.transform=t.transform,this.transport=new r({cache:t.cache,limiter:t.limiter,transport:t.transport})}return e.mixin(t.prototype,{_settings:function t(){return{url:this.url,type:"GET",dataType:"json"}},get:function t(e,n){var i,s=this;if(n)return e=e||"",i=this.prepare(e,this._settings()),this.transport.get(i,function t(e,i){e?n([]):n(s.transform(i))})},cancelLastRequest:function t(){this.transport.cancel()}}),t}(),c=function(){"use strict";return function i(s){var r,o,u,a;return r={initialize:!0,identify:e.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},(s=e.mixin(r,s||{})).datumTokenizer||t.error("datumTokenizer is required"),s.queryTokenizer||t.error("queryTokenizer is required"),o=s.sorter,s.sorter=o?function(t){return t.sort(o)}:e.identity,s.local=e.isFunction(s.local)?s.local():s.local,s.prefetch=(u=s.prefetch,u?(a={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:e.identity,transform:e.identity,transport:null},u=e.isString(u)?{url:u}:u,(u=e.mixin(a,u)).url||t.error("prefetch requires url to be set"),u.transform=u.filter||u.transform,u.cacheKey=u.cacheKey||u.url,u.thumbprint="0.11.1"+u.thumbprint,u.transport=u.transport?n(u.transport):t.ajax,u):null),s.remote=function i(s){var r,o,u,a,c,h,l;if(s){return r={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:e.identity,transport:null},s=e.isString(s)?{url:s}:s,(s=e.mixin(r,s)).url||t.error("remote requires url to be set"),s.transform=s.filter||s.transform,s.prepare=function t(e){var n,i,s;if(n=e.prepare,i=e.replace,s=e.wildcard,n)return n;return i?function t(e,n){return n.url=i(n.url,e),n}:e.wildcard?function t(e,n){return n.url=n.url.replace(s,encodeURIComponent(e)),n}:r;function r(t,e){return e}}(s),s.limiter=(o=s,u=o.limiter,a=o.rateLimitBy,c=o.rateLimitWait,u||(u=/^throttle$/i.test(a)?(h=c,function t(n){return e.throttle(n,h)}):(l=c,function t(n){return e.debounce(n,l)})),u),s.transport=s.transport?n(s.transport):t.ajax,delete s.replace,delete s.wildcard,delete s.rateLimitBy,delete s.rateLimitWait,s}}(s.remote),s};function n(n){return function i(s){var r=t.Deferred();return n(s,function t(n){e.defer(function(){r.resolve(n)})},function t(n){e.defer(function(){r.reject(n)})}),r}}}();return function(){"use strict";var i;function s(t){t=c(t),this.sorter=t.sorter,this.identify=t.identify,this.sufficient=t.sufficient,this.local=t.local,this.remote=t.remote?new a(t.remote):null,this.prefetch=t.prefetch?new u(t.prefetch):null,this.index=new o({identify:this.identify,datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),!1!==t.initialize&&this.initialize()}return i=window&&window.Bloodhound,s.noConflict=function t(){return window&&(window.Bloodhound=i),s},s.tokenizers=n,e.mixin(s.prototype,{__ttAdapter:function t(){var e=this;return this.remote?function t(n,i,s){return e.search(n,i,s)}:function t(n,i){return e.search(n,i)}},_loadPrefetch:function e(){var n,i,s=this;return n=t.Deferred(),this.prefetch?(i=this.prefetch.fromCache())?(this.index.bootstrap(i),n.resolve()):this.prefetch.fromNetwork(function t(e,i){if(e)return n.reject();s.add(i),s.prefetch.store(s.index.serialize()),n.resolve()}):n.resolve(),n.promise()},_initialize:function t(){var e=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(function t(){e.add(e.local)}),this.initPromise},initialize:function t(e){return!this.initPromise||e?this._initialize():this.initPromise},add:function t(e){return this.index.add(e),this},get:function t(n){return n=e.isArray(n)?n:[].slice.call(arguments),this.index.get(n)},search:function t(n,i,s){var r,o=this;return r=this.sorter(this.index.search(n)),i(this.remote?r.slice():r),this.remote&&r.length<this.sufficient?this.remote.get(n,function t(n){var i=[];e.each(n,function(t){e.some(r,function(e){return o.identify(t)===o.identify(e)})||i.push(t)}),s&&s(i)}):this.remote&&this.remote.cancelLastRequest(),this},all:function t(){return this.index.all()},clear:function t(){return this.index.reset(),this},clearPrefetchCache:function t(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function t(){return r.resetCache(),this},ttAdapter:function t(){return this.__ttAdapter()}}),s}()}),function(t,e){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(t){return e(t)}):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(this,function(t){var e,n,i,s={isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:t.isArray,isFunction:t.isFunction,isObject:t.isPlainObject,isUndefined:function(t){return void 0===t},isElement:function(t){return!!(t&&1===t.nodeType)},isJQuery:function(e){return e instanceof t},toStr:function t(e){return s.isUndefined(e)||null===e?"":e+""},bind:t.proxy,each:function(e,n){t.each(e,i);function i(t,e){return n(e,t)}},map:t.map,filter:t.grep,every:function(e,n){var i=!0;return e?(t.each(e,function(t,s){if(!(i=n.call(null,s,t,e)))return!1}),!!i):i},some:function(e,n){var i=!1;return e?(t.each(e,function(t,s){if(i=n.call(null,s,t,e))return!1}),!!i):i},mixin:t.extend,identity:function(t){return t},clone:function(e){return t.extend(!0,{},e)},getIdGenerator:function(){var t=0;return function(){return t++}},templatify:function e(n){return t.isFunction(n)?n:function t(){return String(n)}},defer:function(t){setTimeout(t,0)},debounce:function(t,e,n){var i,s;return function(){var r,o,u=this,a=arguments;return r=function(){i=null,n||(s=t.apply(u,a))},o=n&&!i,clearTimeout(i),i=setTimeout(r,e),o&&(s=t.apply(u,a)),s}},throttle:function(t,e){var n,i,s,r,o,u;return o=0,u=function(){o=new Date,s=null,r=t.apply(n,i)},function(){var a=new Date,c=e-(a-o);return n=this,i=arguments,c<=0?(clearTimeout(s),s=null,o=a,r=t.apply(n,i)):s||(s=setTimeout(u,c)),r}},stringify:function(t){return s.isString(t)?t:JSON.stringify(t)},noop:function(){}},r=(e={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"},function t(n){var i,r,o,u,a,c;return r=s.mixin({},e,n),{css:(i={css:(o={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}},s.isMsie()&&s.mixin(o.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),o),classes:r,html:(u=r,{wrapper:'<span class="'+u.wrapper+'"></span>',menu:'<div class="'+u.menu+'"></div>'}),selectors:(a=r,c={},s.each(a,function(t,e){c[e]="."+t}),c)}).css,html:i.html,classes:i.classes,selectors:i.selectors,mixin:function(t){s.mixin(t,i)}}}),o=function(){"use strict";var e,n;function i(e){e&&e.el||t.error("EventBus initialized without el"),this.$el=t(e.el)}return e="typeahead:",n={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},s.mixin(i.prototype,{_trigger:function(n,i){var s;return s=t.Event(e+n),(i=i||[]).unshift(s),this.$el.trigger.apply(this.$el,i),s},before:function(t){var e,n;return e=[].slice.call(arguments,1),(n=this._trigger("before"+t,e)).isDefaultPrevented()},trigger:function(t){var e;this._trigger(t,[].slice.call(arguments,1)),(e=n[t])&&this._trigger(e,[].slice.call(arguments,1))}}),i}(),u=function(){"use strict";var t,e=/\s+/,n=window.setImmediate?function t(e){setImmediate(function(){e()})}:function t(e){setTimeout(function(){e()},0)};return{onSync:function t(e,n,s){return i.call(this,"sync",e,n,s)},onAsync:function t(e,n,s){return i.call(this,"async",e,n,s)},off:function t(n){var i;if(!this._callbacks)return this;for(n=n.split(e);i=n.shift();)delete this._callbacks[i];return this},trigger:function t(i){var r,o,u,a,c;if(!this._callbacks)return this;for(i=i.split(e),u=[].slice.call(arguments,1);(r=i.shift())&&(o=this._callbacks[r]);)a=s(o.sync,this,[r].concat(u)),c=s(o.async,this,[r].concat(u)),a()&&n(c);return this}};function i(t,n,i,s){var r,o,u;if(!i)return this;for(n=n.split(e),i=s?(o=i,u=s,o.bind?o.bind(u):function(){o.apply(u,[].slice.call(arguments,0))}):i,this._callbacks=this._callbacks||{};r=n.shift();)this._callbacks[r]=this._callbacks[r]||{sync:[],async:[]},this._callbacks[r][t].push(i);return this}function s(t,e,n){return function i(){for(var s,r=0,o=t.length;!s&&r<o;r+=1)s=!1===t[r].apply(e,n);return!s}}}(),a=(n=window.document,i={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1},function t(e){var r;(e=s.mixin({},i,e)).node&&e.pattern&&(e.pattern=s.isArray(e.pattern)?e.pattern:[e.pattern],r=function t(e,n,i){for(var r,o=[],u=0,a=e.length;u<a;u++)o.push(s.escapeRegExChars(e[u]));return r=i?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",n?RegExp(r):RegExp(r,"i")}(e.pattern,e.caseSensitive,e.wordsOnly),function t(e,n){for(var i,s=0;s<e.childNodes.length;s++)3===(i=e.childNodes[s]).nodeType?s+=n(i)?1:0:t(i,n)}(e.node,function t(i){var s,o,u;return(s=r.exec(i.data))&&(u=n.createElement(e.tagName),e.className&&(u.className=e.className),(o=i.splitText(s.index)).splitText(s[0].length),u.appendChild(o.cloneNode(!0)),i.parentNode.replaceChild(u,o)),!!s}))}),c=function(){"use strict";var e;function n(e,n){var i;(e=e||{}).input||t.error("input is missing"),n.mixin(this),this.$hint=t(e.hint),this.$input=t(e.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=(i=this.$input,t('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:i.css("font-family"),fontSize:i.css("font-size"),fontStyle:i.css("font-style"),fontVariant:i.css("font-variant"),fontWeight:i.css("font-weight"),wordSpacing:i.css("word-spacing"),letterSpacing:i.css("letter-spacing"),textIndent:i.css("text-indent"),textRendering:i.css("text-rendering"),textTransform:i.css("text-transform")}).insertAfter(i)),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=s.noop)}return e={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return s.toStr(t).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},s.mixin(n.prototype,u,{_onBlur:function t(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function t(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function t(n){var i=e[n.which||n.keyCode];this._managePreventDefault(i,n),i&&this._shouldTrigger(i,n)&&this.trigger(i+"Keyed",n)},_onInput:function t(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function t(e,n){var s;switch(e){case"up":case"down":s=!i(n);break;default:s=!1}s&&n.preventDefault()},_shouldTrigger:function t(e,n){var s;return s="tab"!==e||!i(n)},_checkLanguageDirection:function t(){var e=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==e&&(this.dir=e,this.$hint.attr("dir",e),this.trigger("langDirChanged",e))},_setQuery:function t(e,i){var s,r,o,u;r=!!(s=(o=e,u=this.query,n.normalizeQuery(o)===n.normalizeQuery(u)))&&this.query.length!==e.length,this.query=e,i||s?!i&&r&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var t,n,i,r,o=this;return t=s.bind(this._onBlur,this),n=s.bind(this._onFocus,this),i=s.bind(this._onKeydown,this),r=s.bind(this._onInput,this),this.$input.on("blur.tt",t).on("focus.tt",n).on("keydown.tt",i),!s.isMsie()||s.isMsie()>9?this.$input.on("input.tt",r):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){!e[t.which||t.keyCode]&&s.defer(s.bind(o._onInput,o,t))}),this},focus:function t(){this.$input.focus()},blur:function t(){this.$input.blur()},getLangDir:function t(){return this.dir},getQuery:function t(){return this.query||""},setQuery:function t(e,n){this.setInputValue(e),this._setQuery(e,n)},hasQueryChangedSinceLastFocus:function t(){return this.query!==this.queryWhenFocused},getInputValue:function t(){return this.$input.val()},setInputValue:function t(e){this.$input.val(e),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function t(){this.setInputValue(this.query)},getHint:function t(){return this.$hint.val()},setHint:function t(e){this.$hint.val(e)},clearHint:function t(){this.setHint("")},clearHintIfInvalid:function t(){var e,n,i,s;i=(e=this.getInputValue())!==(n=this.getHint())&&0===n.indexOf(e),(s=""!==e&&i&&!this.hasOverflow())||this.clearHint()},hasFocus:function t(){return this.$input.is("focus")},hasOverflow:function t(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var t,e,n;return(t=this.$input.val().length,e=this.$input[0].selectionStart,s.isNumber(e))?e===t:!document.selection||((n=document.selection.createRange()).moveStart("character",-t),t===n.text.length)},destroy:function e(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=t("<div>")}}),n;function i(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}}(),h=function(){"use strict";var e,n;function i(e,i){var r,o,u;(e=e||{}).templates=e.templates||{},e.templates.notFound=e.templates.notFound||e.templates.empty,e.source||t.error("missing source"),e.node||t.error("missing node"),e.name&&(r=e.name,!/^[_a-zA-Z0-9-]+$/.test(r))&&t.error("invalid dataset name: "+e.name),i.mixin(this),this.highlight=!!e.highlight,this.name=e.name||n(),this.limit=e.limit||5,this.displayFn=function t(e){return e=e||s.stringify,s.isFunction(e)?e:n;function n(t){return t[e]}}(e.display||e.displayKey),this.templates=(o=e.templates,u=this.displayFn,{notFound:o.notFound&&s.templatify(o.notFound),pending:o.pending&&s.templatify(o.pending),header:o.header&&s.templatify(o.header),footer:o.footer&&s.templatify(o.footer),suggestion:o.suggestion||function e(n){return t("<div>").text(u(n))}}),this.source=e.source.__ttAdapter?e.source.__ttAdapter():e.source,this.async=s.isUndefined(e.async)?this.source.length>2:!!e.async,this._resetLastSuggestion(),this.$el=t(e.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}return e={val:"tt-selectable-display",obj:"tt-selectable-object"},n=s.getIdGenerator(),i.extractData=function n(i){var s=t(i);return s.data(e.obj)?{val:s.data(e.val)||"",obj:s.data(e.obj)||null}:null},s.mixin(i.prototype,u,{_overwrite:function t(e,n){(n=n||[]).length?this._renderSuggestions(e,n):this.async&&this.templates.pending?this._renderPending(e):!this.async&&this.templates.notFound?this._renderNotFound(e):this._empty(),this.trigger("rendered",this.name,n,!1)},_append:function t(e,n){(n=n||[]).length&&this.$lastSuggestion.length?this._appendSuggestions(e,n):n.length?this._renderSuggestions(e,n):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(e),this.trigger("rendered",this.name,n,!0)},_renderSuggestions:function t(e,n){var i;i=this._getSuggestionsFragment(e,n),this.$lastSuggestion=i.children().last(),this.$el.html(i).prepend(this._getHeader(e,n)).append(this._getFooter(e,n))},_appendSuggestions:function t(e,n){var i,s;s=(i=this._getSuggestionsFragment(e,n)).children().last(),this.$lastSuggestion.after(i),this.$lastSuggestion=s},_renderPending:function t(e){var n=this.templates.pending;this._resetLastSuggestion(),n&&this.$el.html(n({query:e,dataset:this.name}))},_renderNotFound:function t(e){var n=this.templates.notFound;this._resetLastSuggestion(),n&&this.$el.html(n({query:e,dataset:this.name}))},_empty:function t(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function n(i,r){var o,u=this;return o=document.createDocumentFragment(),s.each(r,function n(s){var r,a;a=u._injectQuery(i,s),r=t(u.templates.suggestion(a)).data(e.obj,s).data(e.val,u.displayFn(s)).addClass(u.classes.suggestion+" "+u.classes.selectable),o.appendChild(r[0])}),this.highlight&&a({className:this.classes.highlight,node:o,pattern:i}),t(o)},_getFooter:function t(e,n){return this.templates.footer?this.templates.footer({query:e,suggestions:n,dataset:this.name}):null},_getHeader:function t(e,n){return this.templates.header?this.templates.header({query:e,suggestions:n,dataset:this.name}):null},_resetLastSuggestion:function e(){this.$lastSuggestion=t()},_injectQuery:function t(e,n){return s.isObject(n)?s.mixin({_query:e},n):n},update:function e(n){var i=this,s=!1,r=!1,o=0;function u(t){!r&&(r=!0,o=(t=(t||[]).slice(0,i.limit)).length,i._overwrite(n,t),o<i.limit&&i.async&&i.trigger("asyncRequested",n))}this.cancel(),this.cancel=function e(){s=!0,i.cancel=t.noop,i.async&&i.trigger("asyncCanceled",n)},this.source(n,u,function e(r){r=r||[],!s&&o<i.limit&&(i.cancel=t.noop,o+=r.length,i._append(n,r.slice(0,i.limit-o)),i.async&&i.trigger("asyncReceived",n))}),r||u([])},cancel:t.noop,clear:function t(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function t(){return this.$el.is(":empty")},destroy:function e(){this.$el=t("<div>")}}),i}(),l=function(){"use strict";function e(e,n){var i=this;(e=e||{}).node||t.error("node is required"),n.mixin(this),this.$node=t(e.node),this.query=null,this.datasets=s.map(e.datasets,function e(s){var r=i.$node.find(s.node).first();return s.node=r.length?r:t("<div>").appendTo(i.$node),new h(s,n)})}return s.mixin(e.prototype,u,{_onSelectableClick:function e(n){2>parseFloat(jQuery().jquery)&&(n.currentTarget=n.target),this.trigger("selectableClicked",t(n.currentTarget))},_onRendered:function t(e,n,i,s){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",n,i,s)},_onCleared:function t(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function t(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function t(){return s.every(this.datasets,function t(e){return e.isEmpty()})},_getSelectables:function t(){return this.$node.find(this.selectors.selectable)},_removeCursor:function t(){var e=this.getActiveSelectable();e&&e.removeClass(this.classes.cursor)},_ensureVisible:function t(e){var n,i,s,r;i=(n=e.position().top)+e.outerHeight(!0),s=this.$node.scrollTop(),r=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),n<0?this.$node.scrollTop(s+n):r<i&&this.$node.scrollTop(s+(i-r))},bind:function(){var t,e=this;return t=s.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,t),s.each(this.datasets,function(t){t.onSync("asyncRequested",e._propagate,e).onSync("asyncCanceled",e._propagate,e).onSync("asyncReceived",e._propagate,e).onSync("rendered",e._onRendered,e).onSync("cleared",e._onCleared,e)}),this},isOpen:function t(){return this.$node.hasClass(this.classes.open)},open:function t(){this.$node.addClass(this.classes.open)},close:function t(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function t(e){this.$node.attr("dir",e)},selectableRelativeToCursor:function t(e){var n,i,s,r;return i=this.getActiveSelectable(),n=this._getSelectables(),-1===(r=(r=((r=(s=i?n.index(i):-1)+e)+1)%(n.length+1)-1)<-1?n.length-1:r)?null:n.eq(r)},setCursor:function t(e){this._removeCursor(),(e=e&&e.first())&&(e.addClass(this.classes.cursor),this._ensureVisible(e))},getSelectableData:function t(e){return e&&e.length?h.extractData(e):null},getActiveSelectable:function t(){var e=this._getSelectables().filter(this.selectors.cursor).first();return e.length?e:null},getTopSelectable:function t(){var e=this._getSelectables().first();return e.length?e:null},update:function t(e){var n=e!==this.query;return n&&(this.query=e,s.each(this.datasets,function t(n){n.update(e)})),n},empty:function t(){s.each(this.datasets,function t(e){e.clear()}),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function e(){this.$node.off(".tt"),this.$node=t("<div>"),s.each(this.datasets,function t(e){e.destroy()})}}),e}(),f=function(){"use strict";var t=l.prototype;function e(){l.apply(this,[].slice.call(arguments,0))}return s.mixin(e.prototype,l.prototype,{open:function e(){return this._allDatasetsEmpty()||this._show(),t.open.apply(this,[].slice.call(arguments,0))},close:function e(){return this._hide(),t.close.apply(this,[].slice.call(arguments,0))},_onRendered:function e(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function e(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),t._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function e(n){return this.$node.css("ltr"===n?this.css.ltr:this.css.rtl),t.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function t(){this.$node.hide()},_show:function t(){this.$node.css("display","block")}}),e}(),d=function(){"use strict";function e(e,i){var r,o,u,a,c,h,l,f,d,p,g;(e=e||{}).input||t.error("missing input"),e.menu||t.error("missing menu"),e.eventBus||t.error("missing event bus"),i.mixin(this),this.eventBus=e.eventBus,this.minLength=s.isNumber(e.minLength)?e.minLength:1,this.input=e.input,this.menu=e.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),r=n(this,"activate","open","_onFocused"),o=n(this,"deactivate","_onBlurred"),u=n(this,"isActive","isOpen","_onEnterKeyed"),a=n(this,"isActive","isOpen","_onTabKeyed"),c=n(this,"isActive","_onEscKeyed"),h=n(this,"isActive","open","_onUpKeyed"),l=n(this,"isActive","open","_onDownKeyed"),f=n(this,"isActive","isOpen","_onLeftKeyed"),d=n(this,"isActive","isOpen","_onRightKeyed"),p=n(this,"_openIfActive","_onQueryChanged"),g=n(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",r,this).onSync("blurred",o,this).onSync("enterKeyed",u,this).onSync("tabKeyed",a,this).onSync("escKeyed",c,this).onSync("upKeyed",h,this).onSync("downKeyed",l,this).onSync("leftKeyed",f,this).onSync("rightKeyed",d,this).onSync("queryChanged",p,this).onSync("whitespaceChanged",g,this).onSync("langDirChanged",this._onLangDirChanged,this)}return s.mixin(e.prototype,{_hacks:function e(){var n,i;n=this.input.$input||t("<div>"),i=this.menu.$node||t("<div>"),n.on("blur.tt",function(t){var e,r,o;e=document.activeElement,r=i.is(e),o=i.has(e).length>0,s.isMsie()&&(r||o)&&(t.preventDefault(),t.stopImmediatePropagation(),s.defer(function(){n.focus()}))}),i.on("mousedown.tt",function(t){t.preventDefault()})},_onSelectableClicked:function t(e,n){this.select(n)},_onDatasetCleared:function t(){this._updateHint()},_onDatasetRendered:function t(e,n,i,s){this._updateHint(),this.eventBus.trigger("render",i,s,n)},_onAsyncRequested:function t(e,n,i){this.eventBus.trigger("asyncrequest",i,n)},_onAsyncCanceled:function t(e,n,i){this.eventBus.trigger("asynccancel",i,n)},_onAsyncReceived:function t(e,n,i){this.eventBus.trigger("asyncreceive",i,n)},_onFocused:function t(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function t(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function t(e,n){var i;(i=this.menu.getActiveSelectable())&&this.select(i)&&n.preventDefault()},_onTabKeyed:function t(e,n){var i;(i=this.menu.getActiveSelectable())?this.select(i)&&n.preventDefault():(i=this.menu.getTopSelectable())?this.select(i)&&n.preventDefault():(i=this.menu.getTopSelectable())&&this.autocomplete(i)&&n.preventDefault()},_onEscKeyed:function t(){this.close()},_onUpKeyed:function t(){this.moveCursor(-1)},_onDownKeyed:function t(){this.moveCursor(1)},_onLeftKeyed:function t(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function t(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function t(e,n){this._minLengthMet(n)?this.menu.update(n):this.menu.empty()},_onWhitespaceChanged:function t(){this._updateHint()},_onLangDirChanged:function t(e,n){this.dir!==n&&(this.dir=n,this.menu.setLanguageDirection(n))},_openIfActive:function t(){this.isActive()&&this.open()},_minLengthMet:function t(e){return(e=s.isString(e)?e:this.input.getQuery()||"").length>=this.minLength},_updateHint:function t(){var e,n,i,r,o,u,a;e=this.menu.getTopSelectable(),n=this.menu.getSelectableData(e),i=this.input.getInputValue(),!n||s.isBlankString(i)||this.input.hasOverflow()?this.input.clearHint():(r=c.normalizeQuery(i),(a=(u=RegExp("^(?:"+(o=s.escapeRegExChars(r))+")(.+$)","i")).exec(n.val))&&this.input.setHint(i+a[1]))},isEnabled:function t(){return this.enabled},enable:function t(){this.enabled=!0},disable:function t(){this.enabled=!1},isActive:function t(){return this.active},activate:function t(){return!!this.isActive()||!(!this.isEnabled()||this.eventBus.before("active"))&&(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function t(){return!this.isActive()||!this.eventBus.before("idle")&&(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0)},isOpen:function t(){return this.menu.isOpen()},open:function t(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function t(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function t(e){this.input.setQuery(s.toStr(e))},getVal:function t(){return this.input.getQuery()},select:function t(e){var n=this.menu.getSelectableData(e);return!!n&&!this.eventBus.before("select",n.obj)&&(this.input.setQuery(n.val,!0),this.eventBus.trigger("select",n.obj),this.close(),!0)},autocomplete:function t(e){var n,i,s;return n=this.input.getQuery(),!!(s=(i=this.menu.getSelectableData(e))&&n!==i.val)&&!this.eventBus.before("autocomplete",i.obj)&&(this.input.setQuery(i.val),this.eventBus.trigger("autocomplete",i.obj),!0)},moveCursor:function t(e){var n,i,s,r,o;return n=this.input.getQuery(),i=this.menu.selectableRelativeToCursor(e),r=(s=this.menu.getSelectableData(i))?s.obj:null,!((o=this._minLengthMet()&&this.menu.update(n))||this.eventBus.before("cursorchange",r))&&(this.menu.setCursor(i),s?this.input.setInputValue(s.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",r),!0)},destroy:function t(){this.input.destroy(),this.menu.destroy()}}),e;function n(t){var e=[].slice.call(arguments,1);return function(){var n=[].slice.call(arguments);s.each(e,function(e){return t[e].apply(t,n)})}}}();!function(){"use strict";var e,n,i;function u(e,i){e.each(function(){var e,s=t(this);(e=s.data(n.typeahead))&&i(e,s)})}function a(e){var n,i;return(i=(n=s.isJQuery(e)||s.isElement(e))?t(e).first():[]).length?i:null}e=t.fn.typeahead,n={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},i={initialize:function e(i,u){var h;return u=s.isArray(u)?u:[].slice.call(arguments,1),h=r((i=i||{}).classNames),this.each(function e(){var r,p,g,m,y,v,b,S,x,$,w,A,k,C;s.each(u,function(t){t.highlight=!!i.highlight}),r=t(this),p=t(h.html.wrapper),g=a(i.hint),m=a(i.menu),y=!1!==i.hint&&!g,v=!1!==i.menu&&!m,y&&(g=(A=r,k=h,A.clone().addClass(k.classes.hint).removeData().css(k.css.hint).css((C=A,{backgroundAttachment:C.css("background-attachment"),backgroundClip:C.css("background-clip"),backgroundColor:C.css("background-color"),backgroundImage:C.css("background-image"),backgroundOrigin:C.css("background-origin"),backgroundPosition:C.css("background-position"),backgroundRepeat:C.css("background-repeat"),backgroundSize:C.css("background-size")})).attr("readonly",!0).removeAttr("id").removeAttr("name").removeAttr("placeholder").removeAttr("required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1}))),v&&(m=t(h.html.menu).css(h.css.menu)),g&&g.val(""),r=function t(e,i){e.data(n.attrs,{dir:e.attr("dir"),autocomplete:e.attr("autocomplete"),spellcheck:e.attr("spellcheck"),style:e.attr("style")}),e.addClass(i.classes.input).attr({autocomplete:"off",spellcheck:!1});try{e.attr("dir")||e.attr("dir","auto")}catch(s){}return e}(r,h),(y||v)&&(p.css(h.css.wrapper),r.css(y?h.css.input:h.css.inputWithNoHint),r.wrap(p).parent().prepend(y?g:null).append(v?m:null)),w=v?f:l,b=new o({el:r}),S=new c({hint:g,input:r},h),x=new w({node:m,datasets:u},h),$=new d({input:S,menu:x,eventBus:b,minLength:i.minLength},h),r.data(n.www,h),r.data(n.typeahead,$)})},isEnabled:function t(){var e;return u(this.first(),function(t){e=t.isEnabled()}),e},enable:function t(){return u(this,function(t){t.enable()}),this},disable:function t(){return u(this,function(t){t.disable()}),this},isActive:function t(){var e;return u(this.first(),function(t){e=t.isActive()}),e},activate:function t(){return u(this,function(t){t.activate()}),this},deactivate:function t(){return u(this,function(t){t.deactivate()}),this},isOpen:function t(){var e;return u(this.first(),function(t){e=t.isOpen()}),e},open:function t(){return u(this,function(t){t.open()}),this},close:function t(){return u(this,function(t){t.close()}),this},select:function e(n){var i=!1,s=t(n);return u(this.first(),function(t){i=t.select(s)}),i},autocomplete:function e(n){var i=!1,s=t(n);return u(this.first(),function(t){i=t.autocomplete(s)}),i},moveCursor:function t(e){var n=!1;return u(this.first(),function(t){n=t.moveCursor(e)}),n},val:function t(e){var n;return arguments.length?(u(this,function(t){t.setVal(e)}),this):(u(this.first(),function(t){n=t.getVal()}),n)},destroy:function t(){return u(this,function(t,e){var i,r,o;r=(i=e).data(n.www),o=i.parent().filter(r.selectors.wrapper),s.each(i.data(n.attrs),function(t,e){s.isUndefined(t)?i.removeAttr(e):i.attr(e,t)}),i.removeData(n.typeahead).removeData(n.www).removeData(n.attr).removeClass(r.classes.input),o.length&&(i.detach().insertAfter(o),o.remove()),t.destroy()}),this}},t.fn.typeahead=function(t){return i[t]?i[t].apply(this,[].slice.call(arguments,1)):i.initialize.apply(this,arguments)},t.fn.typeahead.noConflict=function n(){return t.fn.typeahead=e,this}}()});