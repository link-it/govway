function getImage(e){var t=getSheet("c3.min.css"),r={cmcss:getSheet("ChartMap.css"),svg_style:"",id:e};(new HttpCSSCall).get(t.href,c3_response,error,r)}function getSheet(e){var t,r=document.querySelectorAll("link"),n=!1;for(i=0;i<r.length;i++)if(-1!=r[i].href.indexOf(e)){n=!0,t=r[i].sheet;break}return n||error(),t}function c3_response(e,t){t.svg_style=e.replaceAll(/\r?\n|\r/g,""),(new HttpCSSCall).get(t.cmcss.href,cmcss_response,error,t)}function cmcss_response(e,t){t.svg_style+=e.replaceAll(/\r?\n|\r/g,""),t.svg_style+="line.c3-xgrid:not(:last-child){fill: none;stroke: #aaa;stroke-width: 1;stroke-dasharray: 3;}",t.svg_style+="line.c3-xgrid:last-child{fill: none;stroke-width: 0;}",t.svg_style+="line.c3-ygrid{fill: none;stroke: #aaa;stroke-width: 1;stroke-dasharray: 3;}.c3-axis ",t.svg_style+=".domain{fill: none;stroke: black;stroke-width: 1;}",t.svg_style=t.svg_style.replaceAll(/\s+/g," ").split("}"),checkSvgClass(t.svg_style,t.id)}function error(){console.warn("c3.min.css | ChartMap.css not loaded!")}function checkSvgClass(e,t){var r=document.getElementById(t),n=(r.querySelector("svg").getBBox(),r.querySelector("svg").cloneNode(!0));n.style.background="white",n.setAttribute("id","svg");var o=document.createElement("canvas");o.setAttribute("id","temporary_canvas"),o.width=n.getAttribute("width"),o.height=n.getAttribute("height");var i=document.createElement("div");i.setAttribute("id","png"),i.appendChild(n);var a=document.createElement("div");a.setAttribute("id","temporary_group"),a.style.display="none",a.appendChild(o),a.appendChild(i),r.appendChild(a),e.forEach(function(e){if(""!=e.trim()){var t=e.split("{"),r=t[0].trim();t[1].split(";").forEach(function(e){if(""!=e.trim()){var t=e.split(":"),o=t[0].trim(),i=t[1].trim();d3.select("#"+n.id).selectAll(r).each(function(e,t){this.getAttribute(o)||this.style[o]||d3.select(this).style(o+"",i+"")})}})}}),d3.select("#"+n.id).selectAll(".c3-chart-arc path").each(function(e,t){d3.select(this).style("stroke","#fff")}),d3.select("#"+n.id).selectAll(".c3-chart-arc text").each(function(e,t){d3.select(this).style("font-size","18px")}),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,t,r){for(var n=atob(this.toDataURL(t,r).split(",")[1]),o=n.length,i=new Uint8Array(o),a=0;a<o;a++)i[a]=n.codePointAt(a);e(new Blob([i],{type:t||"image/png"}))}});var s=(new XMLSerializer).serializeToString(n),c=window.btoa?btoa(s):encode_btoa(s),l=new Image;l.onerror=function(){console.log("Loading B64 Error. Try again..."),this.alternative_encode_procedure(r,s)}.bind(this),l.onload=function(){var e=o.getContext("2d"),t=nomeFileImageExport;this.generateFile(l,e,t,o,a,r)}.bind(this),l.src="data:image/svg+xml;base64,"+c}function encode_btoa(e){for(var t,r,n=String(e),o=0,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="";n.charAt(Math.trunc(o))||(i="=",o%1);a+=i.charAt(63&t>>8-o%1*8)){if((r=n.codePointAt(o+=3/4))>255)throw new Error("Image characters outside of the Latin1 range.");t=t<<8|r}return a}function alternative_encode_procedure(e,t){var r=e.querySelector("#temporary_canvas"),n=e.querySelector("#temporary_group"),o=new Image;o.onerror=function(){e.removeChild(n),console.log("Data error.")}.bind(this),o.onload=function(){var t=r.getContext("2d"),i=nomeFileImageExport;this.generateFile(o,t,i,r,n,e)}.bind(this),o.src="data:image/svg+xml;base64,"+this.alternative_b64_encode(t)}function alternative_b64_encode(e){var t,r,n,o,i,a,s,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",d=0;for(e=this._utf8_encode(e);d<e.length;)o=(t=e.codePointAt(d++))>>2,i=(3&t)<<4|(r=e.codePointAt(d++))>>4,a=(15&r)<<2|(n=e.codePointAt(d++))>>6,s=63&n,Number.isNaN(r)?a=s=64:Number.isNaN(n)&&(s=64),l=l+c.charAt(o)+c.charAt(i)+c.charAt(a)+c.charAt(s);return l}function _utf8_encode(e){e=e.replaceAll("\r\n","\n");for(var t="",r=0;r<e.length;r++){var n=e.codePointAt(r);n<128?t+=String.fromCodePoint(n):n>127&&n<2048?(t+=String.fromCodePoint(n>>6|192),t+=String.fromCodePoint(63&n|128)):(t+=String.fromCodePoint(n>>12|224),t+=String.fromCodePoint(n>>6&63|128),t+=String.fromCodePoint(63&n|128))}return t}function generateFile(e,t,r,n,o,i){try{t.drawImage(e,0,0),n.toBlob(function(e){if(window.navigator.msSaveOrOpenBlob)return window.navigator.msSaveOrOpenBlob(e,r),void i.removeChild(o);var t=document.createElement("a");t.download=r,t.href=n.toDataURL("image/png"),o.appendChild(t),t.click(),i.removeChild(o)})}catch(t){setTimeout(function(){i.removeChild(o);var t=window.open("");t&&t.document.write(e.outerHTML)})}}var HttpCSSCall=function(){this.get=function(e,t,r,n){n=n||{};var o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&(200==o.status?t(o.responseText,n):r(o.responseText,n))},o.open("GET",e,!0),o.send(null)}};