var XRegExp;if(XRegExp)throw Error("can't load XRegExp twice in the same frame");!function(){(XRegExp=function(e,t){var n,a,p,c,o,s=[],u=XRegExp.OUTSIDE_CLASS,h=0;if(XRegExp.isRegExp(e)){if(void 0!==t)throw TypeError("can't supply flags when constructing one RegExp from another");return x(e)}if(l)throw Error("can't call the XRegExp constructor within token definition functions");for(t=t||"",n={hasNamedCapture:!1,captureNames:[],hasFlag:function(e){return t.indexOf(e)>-1},setFlag:function(e){t+=e}};h<e.length;)(a=f(e,h,u,n))?(s.push(a.output),h+=a.match[0].length||1):(p=i.exec.call(g[u],e.slice(h)))?(s.push(p[0]),h+=p[0].length):("["===(c=e.charAt(h))?u=XRegExp.INSIDE_CLASS:"]"===c&&(u=XRegExp.OUTSIDE_CLASS),s.push(c),h++);return(o=RegExp(s.join(""),i.replace.call(t,r,"")))._xregexp={source:e,captureNames:n.hasNamedCapture?n.captureNames:null},o}).version="1.5.0",XRegExp.INSIDE_CLASS=1,XRegExp.OUTSIDE_CLASS=2;var e,t,n=/\$(?:(\d\d?|[$&`'])|{([$\w]+)})/g,r=/[^gimy]+|([\s\S])(?=[\s\S]*\1)/g,a=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,l=!1,p=[],i={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},c=void 0===i.exec.call(/()??/,"")[1],o=(e=/^/g,i.test.call(e,""),!e.lastIndex),s=(t=/x/g,i.replace.call("x",t,""),!t.lastIndex),u=void 0!==RegExp.prototype.sticky,g={};function x(e,t){if(!XRegExp.isRegExp(e))throw TypeError("type RegExp expected");var n=e._xregexp;return e=XRegExp(e.source,h(e)+(t||"")),n&&(e._xregexp={source:n.source,captureNames:n.captureNames?n.captureNames.slice(0):null}),e}function h(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function f(e,t,n,r){var a,i,c,o=p.length;l=!0;try{for(;o--;)if(c=p[o],n&&c.scope&&(!c.trigger||c.trigger.call(r))&&(c.pattern.lastIndex=t,(i=c.pattern.exec(e))&&i.index===t)){a={output:c.handler.call(r,i,n),match:i};break}}catch(s){throw s}finally{l=!1}return a}function d(e,t,n){if(Array.prototype.indexOf)return e.indexOf(t,n);for(var r=n||0;r<e.length;r++)if(e[r]===t)return r;return -1}g[XRegExp.INSIDE_CLASS]=/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/,g[XRegExp.OUTSIDE_CLASS]=/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,XRegExp.addToken=function(e,t,n,r){p.push({pattern:x(e,"g"+(u?"y":"")),handler:t,scope:n||XRegExp.OUTSIDE_CLASS,trigger:r||null})},XRegExp.cache=function(e,t){var n=e+"/"+(t||"");return XRegExp.cache[n]||(XRegExp.cache[n]=XRegExp(e,t))},XRegExp.copyAsGlobal=function(e){return x(e,"g")},XRegExp.escape=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},XRegExp.execAt=function(e,t,n,r){(t=x(t,"g"+(r&&u?"y":""))).lastIndex=n=n||0;var a=t.exec(e);return r?a&&a.index===n?a:null:a},XRegExp.freezeTokens=function(){XRegExp.addToken=function(){throw Error("can't run addToken after freezeTokens")}},XRegExp.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},XRegExp.iterate=function(e,t,n,r){for(var a,l=x(t,"g"),p=-1;a=l.exec(e);)n.call(r,a,++p,e,l),l.lastIndex===a.index&&l.lastIndex++;t.global&&(t.lastIndex=0)},XRegExp.matchChain=function(e,t){return function e(n,r){var a,l=t[r].regex?t[r]:{regex:t[r]},p=x(l.regex,"g"),i=[];for(a=0;a<n.length;a++)XRegExp.iterate(n[a],p,function(e){i.push(l.backref?e[l.backref]||"":e[0])});return r!==t.length-1&&i.length?e(i,r+1):i}([e],0)},RegExp.prototype.apply=function(e,t){return this.exec(t[0])},RegExp.prototype.call=function(e,t){return this.exec(t)},RegExp.prototype.exec=function(e){var t,n,r=i.exec.apply(this,arguments);if(r){if(!c&&r.length>1&&d(r,"")>-1&&(n=RegExp(this.source,i.replace.call(h(this),"g","")),i.replace.call(e.slice(r.index),n,function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(r[e]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var a=1;a<r.length;a++)(t=this._xregexp.captureNames[a-1])&&(r[t]=r[a]);!o&&this.global&&!r[0].length&&this.lastIndex>r.index&&this.lastIndex--}return r},o||(RegExp.prototype.test=function(e){var t=i.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}),String.prototype.match=function(e){if(XRegExp.isRegExp(e)||(e=RegExp(e)),e.global){var t=i.match.apply(this,arguments);return e.lastIndex=0,t}return e.exec(this)},String.prototype.replace=function(e,t){var r,a,l,p=XRegExp.isRegExp(e);return p&&"string"==typeof t.valueOf()&&-1===t.indexOf("${")&&s?i.replace.apply(this,arguments):(p?e._xregexp&&(r=e._xregexp.captureNames):e+="","function"==typeof t?a=i.replace.call(this,e,function(){if(r){arguments[0]=new String(arguments[0]);for(var n=0;n<r.length;n++)r[n]&&(arguments[0][r[n]]=arguments[n+1])}return p&&e.global&&(e.lastIndex=arguments[arguments.length-2]+arguments[0].length),t.apply(null,arguments)}):(l=this+"",a=i.replace.call(l,e,function(){var e=arguments;return i.replace.call(t,n,function(t,n,a){if(n)switch(n){case"$":return"$";case"&":return e[0];case"`":return e[e.length-1].slice(0,e[e.length-2]);case"'":return e[e.length-1].slice(e[e.length-2]+e[0].length);default:var l="";if(!(n=+n))return t;for(;n>e.length-3;)l=String.prototype.slice.call(n,-1)+l,n=Math.floor(n/10);return(n?e[n]||"":"$")+l}else{var p=+a;return p<=e.length-3?e[p]:(p=r?d(r,a):-1)>-1?e[p+1]:t}})})),p&&e.global&&(e.lastIndex=0),a)},String.prototype.split=function(e,t){if(!XRegExp.isRegExp(e))return i.split.apply(this,arguments);var n,r,a=this+"",l=[],p=0;if(void 0===t||0>+t)t=1/0;else if(!(t=Math.floor(+t)))return[];for(e=XRegExp.copyAsGlobal(e);(n=e.exec(a))&&(!(e.lastIndex>p)||(l.push(a.slice(p,n.index)),n.length>1&&n.index<a.length&&Array.prototype.push.apply(l,n.slice(1)),r=n[0].length,p=e.lastIndex,!(l.length>=t)));)e.lastIndex===n.index&&e.lastIndex++;return p===a.length?(!i.test.call(e,"")||r)&&l.push(""):l.push(a.slice(p)),l.length>t?l.slice(0,t):l},XRegExp.addToken(/\(\?#[^)]*\)/,function(e){return i.test.call(a,e.input.slice(e.index+e[0].length))?"":"(?:)"}),XRegExp.addToken(/\((?!\?)/,function(){return this.captureNames.push(null),"("}),XRegExp.addToken(/\(\?<([$\w]+)>/,function(e){return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("}),XRegExp.addToken(/\\k<([\w$]+)>/,function(e){var t=d(this.captureNames,e[1]);return t>-1?"\\"+(t+1)+(isNaN(e.input.charAt(e.index+e[0].length))?"":"(?:)"):e[0]}),XRegExp.addToken(/\[\^?]/,function(e){return"[]"===e[0]?"\\b\\B":"[\\s\\S]"}),XRegExp.addToken(/^\(\?([imsx]+)\)/,function(e){return this.setFlag(e[1]),""}),XRegExp.addToken(/(?:\s+|#.*)+/,function(e){return i.test.call(a,e.input.slice(e.index+e[0].length))?"":"(?:)"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("x")}),XRegExp.addToken(/\./,function(){return"[\\s\\S]"},XRegExp.OUTSIDE_CLASS,function(){return this.hasFlag("s")})}(),"undefined"!=typeof exports&&(exports.XRegExp=XRegExp);