openapi: 3.0.3
servers:
  - url: https://{hostname}/govway/{soggetto}/api-monitor/v1
    description: l'accesso all'API è protetta dai controlli di accesso configurati su GovWay 
    variables:
      hostname:
        default: localhost
      soggetto:
        description: soggetto con cui è stato dispiegato il software GovWay
        default: EnteGenerico
info:
  x-api-id: https://govway.org/apiMonitor
  title: GovWay Monitor API
  x-summary: Servizi per il monitoraggio di GovWay
  description: Servizi per il monitoraggio di GovWay
  termsOfService: https://govway.org/documentazione/api/index.html
  version: "3.3.16.p1"
  contact:
    email: info@link.it
  license:
    name: GPL v3.0
    url: 'https://www.gnu.org/licenses/gpl-3.0.txt'
    
tags:
  - name: Monitoraggio
    description: >-
      Fornisce operazioni che consentono di recuperare i dettagli diagnostici
      delle transazioni e degli eventi occorsi su GovWay
  - name: Reportistica
    description: >-
      Fornisce operazioni che consentono di recuperare i report statistici
      riguardanti le transazioni gestite su GovWay
  - name: Status
    description: >-
      Ritorna lo stato dell'applicazione   

paths:
  
  # Transazioni
  
  /monitoraggio/transazioni:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Monitoraggio
      summary: >-
        Ricerca semplificata delle transazioni in base ai parametri di uso più
        comune
      operationId: findAllTransazioniBySimpleSearch
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        ricercandole in base a parametri di filtro di uso più comune
      parameters:
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/sort'
        - $ref: 'govway_core.yaml#/components/parameters/data_inizio'
        - $ref: 'govway_core.yaml#/components/parameters/data_fine'
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'
      responses:
        "200":
          description: ricerca completata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
        
    post:
      tags:
        - Monitoraggio
      summary: Ricerca completa delle transazioni per intervallo temporale
      operationId: findAllTransazioniByFullSearch
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        limitando i risultati di ricerca ad un intervallo di date
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaIntervalloTemporale'
      responses:
        "200":
          description: ricerca completata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /monitoraggio/transazioni/id-applicativo:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Monitoraggio
      summary: >-
        Ricerca semplificata delle transazioni in base all'identificativo
        applicativo
      operationId: findAllTransazioniByIdApplicativoSimpleSearch
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        ricercandole in base all'identificativo applicativo e i parametri di
        filtro di uso più comune
      parameters:
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/sort'
        - $ref: 'govway_core.yaml#/components/parameters/data_inizio'
        - $ref: 'govway_core.yaml#/components/parameters/data_fine'
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'
        - $ref: '#/components/parameters/id_correlazione_applicativa'
        - $ref: 'govway_core.yaml#/components/parameters/ricerca_esatta'
        - $ref: 'govway_core.yaml#/components/parameters/case_sensitive'          
      responses:
        "200":
          description: ricerca completata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
          - Monitoraggio
      summary: >-
        Ricerca completa delle transazioni in base all'identificativo
        applicativo
      operationId: findAllTransazioniByIdApplicativoFullSearch
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        ricercandole in base all'identificativo applicativo e i parametri di
        filtro completi
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaIdApplicativo'
      responses:
        "200":
          description: ricerca completata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

  /monitoraggio/transazioni/id-applicativo/{id}:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Monitoraggio
      summary: >-
        Ricerca delle transazioni in base all'identificativo dell'applicativo
      operationId: findAllTransazioniByIdApplicativo
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        ricercandole in base all'identificativo dell'applicativo
      parameters:
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/sort'
        - $ref: '#/components/parameters/tipo_id_applicativo'
        - $ref: '#/components/parameters/id_applicativo'

      responses:
        "200":
          description: dettaglio transazione restituito correttamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /monitoraggio/transazioni/id-messaggio:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Monitoraggio
      summary: >-
        Ricerca semplificata delle transazioni in base all'identificativo
        messaggio
      operationId: findAllTransazioniByIdMessaggio
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        ricercandole in base all'identificativo messaggio
      parameters:
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/sort'
        - $ref: '#/components/parameters/tipo_messaggio'
        - $ref: '#/components/parameters/id_messaggio'

      responses:
        "200":
          description: dettaglio transazione restituito correttamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

  /monitoraggio/transazioni/purpose-id:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Monitoraggio
      summary: >-
        Ricerca semplificata delle transazioni in base all'identificativo
        finalita
      operationId: findAllTransazioniByPurposeId
      description: >-
        Permette di recuperare i dettagli delle transazioni, gestite su GovWay,
        ricercandole in base all'identificativo della finalita
      parameters:
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/sort'
        - $ref: '#/components/parameters/purpose_id'

      responses:
        "200":
          description: dettaglio transazione restituito correttamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTransazioni'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
          
  /monitoraggio/transazioni/{id}:
    get:
      tags:
        - Monitoraggio
      summary: Dettaglio della transazione
      operationId: getTransazione
      description: Questa operazione consente di ottenere il dettaglio di una transazione
      parameters:
        - $ref: '#/components/parameters/id_transazione'
      responses:
        "200":
          description: dettaglio transazione restituito correttamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DetailTransazione'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  # Eventi

  /monitoraggio/eventi:
  
    get:
      tags:
        - Monitoraggio
      summary:
        Ricerca di Eventi
      description: >-
        Questa operazione consente di effettuare una ricerca nell'archivio degli eventi
        specificando i criteri di filtraggio
      operationId: findAllEventi
      parameters:
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"
        - $ref: "#/components/parameters/severita"
        - $ref: "#/components/parameters/tipo_evento"
        - $ref: "#/components/parameters/codice_evento"
        - $ref: "#/components/parameters/origine_evento"
        - $ref: "govway_core.yaml#/components/parameters/ricerca_esatta"
        - $ref: "govway_core.yaml#/components/parameters/case_sensitive"
      responses:
        "200":
          description: Ricerca eventi completata con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaEventi'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

  /monitoraggio/eventi/{id}:
    get:
      tags:
        - Monitoraggio
      summary: Dettaglio di un evento
      operationId: getEvento
      description: >-
        Permette di recuperare il dettaglio di un evento in base al suo identificativo

      parameters:
        - $ref: '#/components/parameters/id_evento_path'
      responses:
        "200":
          description: Recupero evento completato con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Evento'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  # Statistiche

  /reportistica/analisi-statistica/distribuzione-temporale:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'

    get:
      tags:
        - Reportistica
      summary: Genera un report statistico per andamento temporale per mezzo di una ricerca semplice
      operationId: getReportDistribuzioneTemporaleBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per andamento temporale esportandolo nei formati più comuni
        
      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico per andamento temporale per mezzo di una ricerca articolata
      operationId: getReportDistribuzioneTemporaleByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        per andamento temporale esportandolo nei formati più comuni 
        
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaAndamentoTemporale'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-esiti:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico per andamento esiti per mezzo di una ricerca semplice
      operationId: getReportDistribuzioneEsitiBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per andamento esiti esportandolo nei formati più comuni
        
      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico per andamento esiti per mezzo di una ricerca articolata
      operationId: getReportDistribuzioneEsitiByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        per andamento esiti esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneEsiti'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-errori:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per esiti di errore utilizzando una ricerca semplice
      operationId: getReportDistribuzioneErroriBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per esiti di errore esportandolo nei formati più comuni
      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'                     
        - $ref: 'govway_core.yaml#/components/parameters/azione'
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
        - $ref: '#/components/parameters/dimensioni_report'
        - $ref: '#/components/parameters/dimensioni_report_custom_info'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
    
    post:
      tags:
        - Reportistica
      summary: Genera un report statistico distribuito per esiti di errore utilizzando una ricerca articolata
      operationId: getReportDistribuzioneErroriByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggruppato distribuito per esiti di errore ed esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneErrori'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-soggetto-remoto:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico per soggetto remoto per mezzo di una ricerca semplice
      operationId: getReportDistribuzioneSoggettoRemotoBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per soggetto remoto esportandolo nei formati più comuni

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
        - $ref: '#/components/parameters/dimensioni_report'
        - $ref: '#/components/parameters/dimensioni_report_custom_info'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico raggruppato per soggetto remoto per mezzo di una ricerca articolata
      operationId: getReportDistribuzioneSoggettoRemotoByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggruppato per soggetto remoto esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneSoggettoRemoto'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-soggetto-locale:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      # Non ci vuole essendo la distribuzione per soggetto locale: - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico per soggetto locale per mezzo di una ricerca semplice
      operationId: getReportDistribuzioneSoggettoLocaleBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per soggetto locale esportandolo nei formati più comuni

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
        - $ref: '#/components/parameters/dimensioni_report'
        - $ref: '#/components/parameters/dimensioni_report_custom_info'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico raggruppato per soggetto locale per mezzo di una ricerca articolata
      operationId: getReportDistribuzioneSoggettoLocaleByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggruppato per soggetto locale esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneSoggettoLocale'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-api:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per API utilizzando una ricerca semplice
      operationId: getReportDistribuzioneApiBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        organizzato per API esportandolo nei formati più comuni
      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/distingui_api_implementata'                   
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
        - $ref: '#/components/parameters/dimensioni_report'
        - $ref: '#/components/parameters/dimensioni_report_custom_info'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera per mezzo di una ricerca articolata, un report statistico raggruppato per servizi
      operationId: getReportDistribuzioneApiByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggrupato per servizi esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApi'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-azione:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per Azioni utilizzando una ricerca semplice
      operationId: getReportDistribuzioneAzioneBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per azione esportandolo nei formati più comuni
      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'                     
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
        - $ref: '#/components/parameters/dimensioni_report'
        - $ref: '#/components/parameters/dimensioni_report_custom_info'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
    
    post:
      tags:
        - Reportistica
      summary: Genera un report statistico distribuito per azione utilizzando una ricerca articolata
      operationId: getReportDistribuzioneAzioneByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggruppato distribuito per azione ed esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneAzione'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-applicativo:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per Applicativi utilizzando una ricerca semplice
      operationId: getReportDistribuzioneApplicativoBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per applicativo esportandolo nei formati più comuni

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: '#/components/parameters/soggetto_mittente'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'  
        - $ref: "#/components/parameters/tipo_identificazione_applicativo"
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
        - $ref: '#/components/parameters/dimensioni_report'
        - $ref: '#/components/parameters/dimensioni_report_custom_info'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
    
    post:
      tags:
        - Reportistica
      summary: Genera un report statistico per applicativo utilizzando una ricerca articolata
      operationId: getReportDistribuzioneApplicativoByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggruppato per applicativo ed esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativoRegistrato'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-id-autenticato:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per Identificativo Autenticato utilizzando una ricerca semplice
      operationId: getReportDistribuzioneIdAutenticatoBySimpleSearch
      description: >-
        Questa operazione consente di generare per mezzo di una ricerca semplice, un report statistico
        per identificativo autenticato esportandolo nei formati più comuni

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
        - $ref: '#/components/parameters/dimensioni_report'
        - $ref: '#/components/parameters/dimensioni_report_custom_info'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico per identificativo autenticato utilizzando una ricerca articolata
      operationId: getReportDistribuzioneIdAutenticatoByFullSearch
      description: >-
        Questa operazione consente di generare un report statistico
        raggruppato per identificativo autenticato ed esportandolo nei formati più comuni 
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/analisi-statistica/distribuzione-token-info:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato organizzato per Token Info utilizzando una ricerca semplice
      operationId: getReportDistribuzioneTokenInfoBySimpleSearch
      description: >-
        Consente di generare un report raggruppato secondo un claim del token per mezzo di una ricerca semplice

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
        - $ref: '#/components/parameters/dimensioni_report'
        - $ref: '#/components/parameters/dimensioni_report_custom_info'
        - $ref: '#/components/parameters/claim'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per Token Info
      operationId: getReportDistribuzioneTokenInfoByFullSearch
      description: >-
        Consente di generare un report raggruppato secondo un claim del token
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneTokenInfo'

      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
          
  /reportistica/analisi-statistica/distribuzione-indirizzo-ip:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato organizzato per Indirizzo IP utilizzando una ricerca semplice
      operationId: getReportDistribuzioneIndirizzoIPBySimpleSearch
      description: >-
        Consente di generare un report degli indirizzo IP per mezzo di una ricerca semplice

      parameters:
        - $ref: "govway_core.yaml#/components/parameters/data_inizio"
        - $ref: "govway_core.yaml#/components/parameters/data_fine"  
        - $ref: '#/components/parameters/tipo_transazione'
        - $ref: '#/components/parameters/id_cluster'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: '#/components/parameters/soggetto_erogatore'
        - $ref: 'govway_core.yaml#/components/parameters/tag'
        - $ref: '#/components/parameters/uri_api_implementata'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/azione'                     
        - $ref: '#/components/parameters/esito_transazione'
        - $ref: '#/components/parameters/escludi_scartate'                     
        - $ref: "#/components/parameters/formato_report"
        - $ref: "#/components/parameters/unita_tempo_report"
        - $ref: "#/components/parameters/tipo_report"
        - $ref: '#/components/parameters/tipo_informazione_report'
        - $ref: '#/components/parameters/dimensioni_report'
        - $ref: '#/components/parameters/dimensioni_report_custom_info'
      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

    post:
      tags:
        - Reportistica
      summary: Genera un report statistico organizzato per Indirizzi IP
      operationId: getReportDistribuzioneIndirizzoIPByFullSearch
      description: >-
        Consente di generare un report degli indirizzo IP
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'

      responses:
        "200":
          $ref: '#/components/responses/200ReportStatistico'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
          


  # Reportistica Configurazione
  
  /reportistica/configurazione-api/riepilogo:   # Pannellino di sinistra non filtrato, uguale sia per erogazione che fruizione
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Ottieni le informazioni generali sulle api e servizi di un soggetto
      description: >-
        Restituisce il numero e tipo di api che coinvolgono il soggetto, e un riepilogo del registro
        circa i soggetti e gli applicativi registrati.
      operationId: getRiepologoConfigurazioni
      responses:
        "200":
          description: Riepilogo ottenuto con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Riepilogo'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
      
      
  /reportistica/configurazione-api/riepilogo/api:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Ottieni le informazioni generali sulle implementazioni di un Api
      description: >-
        Recupera le informazioni generali di una Api, come il nome e il numero di erogazioni e fruizioni registrate per esso
      parameters:
        - $ref: '#/components/parameters/tipo_transazione_config'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio_obbligatorio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
      operationId: getRiepilogoApi
      responses:
        "200":
          description: Informazioni sulla API ottenute con successo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InfoImplementazioneApi'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/configurazione-api:  # Lista
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica 
      summary: Consente di recuperare l'elenco delle erogazioni o fruizioni che coinvolgono il soggetto scelto
      operationId: getConfigurazioneApi
      description: >-
        Ricerca le erogazioni e fruizioni registrate sul sistema
      parameters:
        - $ref: '#/components/parameters/tipo_transazione_config'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/offset'
        - $ref: 'teamdigitale-openapi_definitions.yaml#/components/parameters/limit'
      responses:
          "200":
            description: Riepilogo ottenuto con successo
            content: 
              application/json:
                schema:
                  $ref: '#/components/schemas/ListaRiepilogoApi'
          "400":
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
          "401":
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
          "403":
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
          "404":
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
          "429":
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
          "503":
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
          default:
            $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'


  /reportistica/configurazione-api/esporta:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/profilo'
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
  
    get:
      tags:
        - Reportistica
      summary: Recupera la configurazione di un servizio
      operationId: exportConfigurazioneApiBySimpleSearch
      description: >-
        Consente di recuperare la configurazione di un servizio esportandola in formato csv, xls
      parameters:
        - $ref: '#/components/parameters/tipo_transazione_config'
        - $ref: '#/components/parameters/soggetto_remoto'
        - $ref: 'govway_core.yaml#/components/parameters/nome_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/tipo_servizio'
        - $ref: 'govway_core.yaml#/components/parameters/versione_servizio'
        - $ref: "#/components/parameters/formato_report_config"
      responses:
        "200":
          $ref: '#/components/responses/200ReportConfigurazioni'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'    
      
    post:
      tags:
        - Reportistica
      summary: Recupera la configurazione di un servizio
      operationId: exportConfigurazioneApiByFullSearch
      description: >-
        Consente di recuperare la configurazione di un servizio esportandola in formato csv, xls
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RicercaConfigurazioneApi'
      
      responses:
        "200":
          $ref: '#/components/responses/200ReportConfigurazioni'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'

  /reportistica/tracing-pdnd:
    parameters:
      - $ref: 'govway_core.yaml#/components/parameters/soggetto'
    get:
      tags:
        - Reportistica
      summary: Recupera la lista di tracciati della pdnd
      operationId: getTracingPdndList
      description: >-
        Consente di recuperare la configurazione di un servizio esportandola in formato csv, xls
      parameters:
        - $ref: '#/components/parameters/numero_tentativi_tracing'
        - $ref: '#/components/parameters/stato_tracing'
        - $ref: '#/components/parameters/stato_tracing_pdnd'
        - $ref: '#/components/parameters/data_tracing_inizio'
        - $ref: '#/components/parameters/data_tracing_fine'
        - $ref: '#/components/parameters/tracing_id'
      responses:
        "200":
          description: lista dei tracing attivi che rispettano i filtri di ricerca
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListaTracingPDND'
        "400":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/400BadRequest'
        "401":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/401Unauthorized'
        "403":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/403Forbidden'
        "404":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/404NotFound'
        "429":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/429TooManyRequests'
        "503":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/503ServiceUnavailable'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'    
  /status:
    get:
      tags:
        - Status
      summary: Ritorna lo stato dell'applicazione
      operationId: getStatus
      description: >-
        Ritorna lo stato dell'applicazione in formato problem+json
      responses:
        "200":
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/200Status'
        default:
          $ref: 'teamdigitale-openapi_definitions.yaml#/components/responses/default'
        
components:

  responses:
  
    200ReportStatistico:
      description: Report statistico generato correttamente
      content:
        text/csv:
          schema:
            type: string
            format: binary
        application/pdf:
          schema:
            type: string
            format: binary
        application/vnd.ms-excel:
          schema:
            type: string
            format: binary
        text/xml:
          schema:
            type: string
            format: binary
        application/json:
          schema:
            type: string
            format: binary

    200ReportConfigurazioni:
      description: Report delle configurazioni generato correttamente
      content:
        text/csv:
          schema:
            type: string
            format: binary
        application/vnd.ms-excel:
          schema:
            type: string
            format: binary

  parameters:

    # Dati Identificativi nel path

    id_transazione:
      in: path
      name: id
      description: identificativo della transazione
      required: true
      schema:
        $ref: 'govway_trace.yaml#/components/schemas/TransazioneId'

    id_applicativo:
      in: path
      name: id
      description: identificativo applicativo
      required: true
      schema:
        type: string

    id_evento_path:
      in: path
      name: id
      description: L'identificativo dell'evento da recuperare
      required: true
      schema:
        type: integer
        format: int64

    # Criteri di ricerca obbligatori nella query

    tipo_transazione:
      in: query
      name: tipo
      description: La tipologia (erogazione\fruizione) del servizio
      required: true
      schema:
        $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaRuoloTransazioneEnum'
        
    tipo_transazione_config:
      in: query
      name: tipo
      description: La tipologia (erogazione\fruizione) del servizio
      required: true
      schema:
        $ref: 'govway_trace.yaml#/components/schemas/TransazioneRuoloEnum'
        
    id_correlazione_applicativa:
      in: query
      name: id_applicativo
      description: l'identificativo di correlazione applicativa della richiesta o della risposta
      required: true
      schema:
        type: string
        
            
    purpose_id:
      in: query
      name: purpose_id
      description: l'identificativo di finalita del token usato (purposeId)
      required: true
      schema:
        type: string

    id_messaggio:
      in: query
      name: id
      required: true
      description: L'identificativo del messaggio
      schema:
        type: string      

    tipo_messaggio:
      in: query
      name: tipo_messaggio
      required: true
      description: "Distingue se l'identificativo del messaggio è relativo ad una richiesta o una risposta"
      schema:
        $ref: "#/components/schemas/TipoMessaggioEnum"

    tipo_id_applicativo:
      in: query
      name: tipo_identificativo
      required: true
      description: "Distingue se l'identificativo applicativo è relativo ad una richiesta o una risposta"
      schema:
        $ref: "#/components/schemas/TipoIdApplicativoEnum"


    # Criteri di ricerca opzionali nella query  

    uri_api_implementata:
      in: query
      name: uri_api_implementata 
      description: Identificativo dell'API implementata
      required: false
      schema:
        $ref: '#/components/schemas/UriApi'
        
    distingui_api_implementata:
      in: query
      name: distingui_api_implementata 
      description: Identificativo dell'API implementata
      required: false
      schema:
        type: boolean
        default: true    

    soggetto_remoto:
      in: query
      name: soggetto_remoto
      description: >-
        Il soggetto remoto coinvolto nella transazione, ovvero il fruitore in
        caso di erogazione, o l'erogatore in caso di fruizione
      required: false
      schema:
        $ref: 'govway_core.yaml#/components/schemas/SimpleName'
       
    soggetto_erogatore:
      in: query
      name: soggetto_erogatore
      description: >-
        Il soggetto erogatore di una API
      required: false
      schema:
        $ref: 'govway_core.yaml#/components/schemas/SimpleName'
        
    soggetto_mittente:
      in: query
      name: soggetto_mittente
      description: >-
        Il soggetto mittente che invoca una API
      required: false
      schema:
        $ref: 'govway_core.yaml#/components/schemas/SimpleName'
        
    id_cluster: 
      in: query
      name: id_cluster 
      description: Identificativo del nodo su cui e' stata emessa la transazione
      required: false
      schema:
        type: string

    esito_transazione:
      in: query
      name: esito
      description: >-
        "Indica come sono state gestite le transazioni (ok, fallite, fallite_e_fault, errori_consegna, richieste_scartate)" 
      schema:
        $ref: '#/components/schemas/EsitoTransazioneSimpleSearchEnum'
      required: false
      
    escludi_scartate:
      in: query
      name: escludi_scartate
      description: 'informazione utilizzata per escludere le richieste scartate; viene utilizzata solamente nel caso il parametro esito_transazione non sia fornito o assuma il valore fallite o fallite_e_fault'
      schema:
        type: boolean
        default: false

    severita:
      in: query
      name: severita
      description: Indica il livello di severità con il quale l'evento è stato registrato nel sistema
      required: false
      schema:
        $ref: 'govway_trace-ext.yaml#/components/schemas/DiagnosticoSeveritaEnum'

    origine_evento:
      in: query
      name: origine
      description: attore che ha provocato l'evento (es. nodo di un cluster)
      required: false
      schema:
        type: string

    codice_evento:
      in: query
      name: codice
      description: codice dell'evento
      required: false
      schema:
        type: string

    tipo_evento:
      in: query
      name: tipo
      description: tipo di evento (es. rateLimiting)
      required: false
      schema:
        type: string


    # Criteri di generazione report nella query  
        
    formato_report:
      in: query
      name: formato_report
      description: Indica la modalità di esportazione (csv, pdf...) del report statistico
      schema: 
        $ref: '#/components/schemas/FormatoReportEnum'
      required: true

    formato_report_config:
      in: query
      name: formato_report
      description: Indica la modalità di esportazione (csv, ...) del report statistico
      schema: 
        $ref: '#/components/schemas/FormatoReportConfigEnum'
      required: false

    unita_tempo_report:
      in: query
      name: unita_tempo
      description: L'unità di tempo con cui visualizzare i report
      schema:
        $ref: '#/components/schemas/UnitaTempoReportEnum'
      required: false

    tipo_report:
      in: query
      name: tipo_report
      description: Indica il tipo di grafico da voler visualizzare per un dato report statistico
      schema:
        $ref: "#/components/schemas/TipoReportEnum"
      required: false
      
    tipo_informazione_report:
      in: query
      name: tipo_informazione_report
      description: Specifica l'informazione da visualizzare nel report
      schema:
        $ref: '#/components/schemas/TipoInformazioneReportEnum'
      required: false

    dimensioni_report:
      in: query
      name: dimensioni_report
      description: Specifica le informaziono visualizzate nel report se senza data (2d) o con data (3d) o con informazione personalizzata (3dcustom)
      schema:
        $ref: '#/components/schemas/DimensioniReportEnum'
      required: false
      
    dimensioni_report_custom_info:
      in: query
      name: dimensioni_report_custom_info
      description: Specifica l'informazione personalizzata visualizzata come 3 dimensione dei report
      schema:
        $ref: '#/components/schemas/DimensioniReportCustomEnum'
      required: false
      
    tipo_identificazione_applicativo:
      in: query
      name: tipo_identificazione
      description: Indica la modalità di identificazione dell'applicativo tra trasporto o token
      schema: 
        $ref: '#/components/schemas/TipoIdentificazioneApplicativoEnum'
      required: false
      default: trasporto

    claim:
      in: query
      name: claim
      description: Specifica il claim che deve essere presente nel jwt di una transazione
      schema:
        $ref: "govway_core.yaml#/components/schemas/TokenClaimDistribuzioneStatisticaEnum"
      required: true
          
    numero_tentativi_tracing:
      in: query
      name: numero_tentativi
      description: Specifica il numero di tentativi effettuati da una pubblicazione di tracing
      schema:
        type: integer
        format: int32
        min: 0
      required: false
    
    stato_tracing_pdnd:
      in: query
      name: stato_pdnd
      description: Specifica lo stato PDND del tracing pubblicato
      schema:
        $ref: '#/components/schemas/StatoTracingPDND'
      required: true
      default: 'Qualsiasi'
    
    stato_tracing:
      in: query
      name: stato
      description: Specifica lo stato della richiesta inviata alla PDND del tracing pubblicato
      schema:
        $ref: '#/components/schemas/StatoTracing'
      required: true
      default: 'Qualsiasi'
      
    data_tracing_inizio:
      in: query
      name: data_inizio
      description: Specifica la data di inizio della ricerca
      schema:
        type: string
        format: date
      required: true
    
    data_tracing_fine:
      in: query
      name: data_fine
      description: Specifica la data di fine della ricerca
      schema:
        type: string
        format: date
      required: true
    
    tracing_id:
      in: query
      name: tracing_id
      description: Specifica il tracing id del tracciato
      schema:
        type: string
        format: uuid
      required: false

 
  schemas:

    # Id

    UriApi:
      type: string
      pattern: ^[a-z]{2,20}/[0-9A-Za-z]+:[_A-Za-z][\-\._A-Za-z0-9]*:\d$|^[_A-Za-z][\-\._A-Za-z0-9]*:\d$
      description: Indica l'uri di una Api 

    # Transazioni

    ListaTransazioni:
      type: object
      allOf:
        - $ref: 'govway_core.yaml#/components/schemas/ListaSenzaTotale'
        - type: object
          required:
          - items
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/ItemTransazione'

    ItemTransazione:
      type: object
      allOf:
        - $ref: 'govway_trace.yaml#/components/schemas/TransazioneBase'
        - $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExtTipo'
        - type: object      
          required:
            - data
          properties:
            data:
              type: string
              format: date-time
            latenza_servizio:
              type: integer
              format: int64
              example: 8
            latenza_totale:
              type: integer
              format: int64
              example: 20
            richiesta:
              $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExtDettaglioRichiestaBase'
            risposta:
              $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExtDettaglioRispostaBase'
            api:
              $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExtInformazioniApiBase'
            mittente:
              $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExtInformazioniMittenteBase'
            pdnd_organization:
              $ref: '#/components/schemas/PDNDOrganizationInfoItemTransazione'
            richiedente:
              type: string

    DetailTransazione:
      type: object
      allOf:
        - $ref: 'govway_trace-ext.yaml#/components/schemas/TransazioneExt'
        - type: object      
          required:
            - data
          properties:
            data:
              type: string
              format: date-time
            latenza_servizio:
              type: integer
              format: int64
              example: 8
            latenza_totale:
              type: integer
              format: int64
              example: 20
            pdnd_organization:
              $ref: '#/components/schemas/PDNDOrganizationInfo'
            richiedente:
              type: string
            dettaglio_errore:
              type: string

    PDNDOrganizationInfoItemTransazione:
      type: object
      properties:
        nome:
          type: string

    PDNDOrganizationInfo:
      type: object
      properties:
        nome:
          type: string
        categoria:
          type: string
        external_id:
          $ref: '#/components/schemas/PDNDOrganizationExternalId'
    PDNDOrganizationExternalId:
      type: object
      properties:
        codice:
          type: string
        origine:
          type: string

    # Eventi

    ListaEventi:
      type: object
      allOf:
        - $ref: 'govway_core.yaml#/components/schemas/ListaSenzaTotale'
        - type: object
          required:
            - items
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/Evento'

    Evento:
      type: object
      properties:
        id:
          type: integer
          format: int64
        ora_registrazione:
          type: string
          format: date-time
        severita:
          $ref: 'govway_trace-ext.yaml#/components/schemas/DiagnosticoSeveritaEnum'
        tipo:
          type: string
        codice:
          type: string
        origine:
          type: string
        descrizione:
          type: string


    # Statistiche

    OpzioniGenerazioneReportBase:
      type: object
      required:
      - formato
      properties:
        formato:
          $ref: '#/components/schemas/FormatoReportEnum'
        tipo:
          $ref: '#/components/schemas/TipoReportEnum' 


    OpzioniGenerazioneReport:
      type: object
      allOf:
        - $ref: '#/components/schemas/OpzioniGenerazioneReportBase'
        - type: object
          properties:  
            tipo_informazione:
             discriminator:
               propertyName: tipo
               mapping:
                 numero_transazioni: '#/components/schemas/TipoInformazioneReportNumeroTransazioni'   
                 occupazione_banda:  '#/components/schemas/TipoInformazioneReportOccupazioneBanda' 
                 tempo_medio_risposta: '#/components/schemas/TipoInformazioneReportTempoMedioRisposta'
             oneOf:
               - $ref: '#/components/schemas/TipoInformazioneReportNumeroTransazioni'  
               - $ref: '#/components/schemas/TipoInformazioneReportOccupazioneBanda'  
               - $ref: '#/components/schemas/TipoInformazioneReportTempoMedioRisposta'

    OpzioniGenerazioneReportDimensioni:
      type: object
      allOf:
        - $ref: '#/components/schemas/OpzioniGenerazioneReport'
        - type: object
          properties:  
            dimensioni:
              $ref: '#/components/schemas/DimensioniReportEnum'
            custom_info:
              $ref: '#/components/schemas/DimensioniReportCustomEnum'  

    TipoInformazioneReportNumeroTransazioni:
      type: object
      required:
      - tipo
      properties:
        tipo:
          $ref: '#/components/schemas/TipoInformazioneReportEnum'

    TipoInformazioneReportOccupazioneBanda:
      type: object
      required:
      - tipo
      properties:
        tipo:
          $ref: '#/components/schemas/TipoInformazioneReportEnum'
        occupazione_banda:
          $ref: '#/components/schemas/OccupazioneBandaEnum'

    TipoInformazioneReportTempoMedioRisposta:
      type: object
      required:
      - tipo
      properties:
        tipo:
          $ref: '#/components/schemas/TipoInformazioneReportEnum'
        tempo_medio_risposta:
          $ref: '#/components/schemas/TempoMedioRispostaEnum'


    OpzioniGenerazioneReportMultiLine:
      type: object
      allOf:
        - $ref: '#/components/schemas/OpzioniGenerazioneReportBase'
        - type: object
          properties:  
            tipo_informazione:
             discriminator:
               propertyName: tipo
               mapping:
                 numero_transazioni: '#/components/schemas/TipoInformazioneReportMultiLineNumeroTransazioni'   
                 occupazione_banda:  '#/components/schemas/TipoInformazioneReportMultiLineOccupazioneBanda' 
                 tempo_medio_risposta: '#/components/schemas/TipoInformazioneReportMultiLineTempoMedioRisposta'
             oneOf:
               - $ref: '#/components/schemas/TipoInformazioneReportMultiLineNumeroTransazioni'  
               - $ref: '#/components/schemas/TipoInformazioneReportMultiLineOccupazioneBanda'  
               - $ref: '#/components/schemas/TipoInformazioneReportMultiLineTempoMedioRisposta'

    TipoInformazioneReportMultiLineNumeroTransazioni:
      type: object
      required:
      - tipo
      properties:
        tipo:
          $ref: '#/components/schemas/TipoInformazioneReportEnum'

    TipoInformazioneReportMultiLineOccupazioneBanda:
      type: object
      required:
      - tipo
      properties:
        tipo:
          $ref: '#/components/schemas/TipoInformazioneReportEnum'
        occupazione_banda:
          $ref: '#/components/schemas/OccupazioneBandaTipi'

    TipoInformazioneReportMultiLineTempoMedioRisposta:
      type: object
      required:
      - tipo
      properties:
        tipo:
          $ref: '#/components/schemas/TipoInformazioneReportEnum'
        tempo_medio_risposta:
          $ref: '#/components/schemas/TempoMedioRispostaTipi'

    OccupazioneBandaTipi:
      type: object
      properties:
        banda_complessiva:
          type: boolean
          default: true
        banda_interna:
          type: boolean
          default: false
        banda_esterna:
          type: boolean
          default: false

    TempoMedioRispostaTipi:
      type: object
      properties:
        latenza_totale:
          type: boolean
          default: true
        latenza_servizio:
          type: boolean
          default: false
        latenza_gateway:
          type: boolean
          default: false


    # Report Configurazioni

    Riepilogo:
      type: object
      required:
      - api
      - erogazioni
      - fruizioni
      - soggetti_dominio_interno
      - soggetti_dominio_esterno
      - applicativi
      properties:
        api:
          type: integer
          format: int32
          description: Il numero di api per cui il soggetto è referente
          example: 2
        soggetto:
          $ref: "govway_core.yaml#/components/schemas/SimpleName"
        erogazioni:
          type: integer
          format: int32
          description: Il numero di erogazioni del soggetto
          example: 2
        fruizioni:
          type: integer
          format: int32
          description: Il numero di fruizioni del soggetto
          example: 2
        soggetti_dominio_interno:
          type: integer
          format: int32
        soggetti_dominio_esterno:
          type: integer
          format: int32
        applicativi:
          type: integer
          format: int32

    InfoImplementazioneApi:
      type: object
      properties:
        nome: 
          $ref: 'govway_core.yaml#/components/schemas/NCName'
        tipo: 
          $ref: 'govway_core.yaml#/components/schemas/Tipo'
        versione:
          $ref: 'govway_core.yaml#/components/schemas/Versione'
        soggetto:
          $ref: "govway_core.yaml#/components/schemas/SimpleName"
        azioni:
          type: integer
          format: int32
          description: Il numero di azioni\risorse della api
          example: 20
        erogazioni:
          type: integer
          format: int32
          description: Il numero di erogazioni che implementano la api
          example: 2
        fruizioni:
          type: integer
          format: int32
          description: Il numero di fruizioni che implementano la api
          example: 2

    ListaRiepilogoApi:
      type: object
      allOf:
        - $ref: 'govway_core.yaml#/components/schemas/Lista'
        - type: object
          required:
            - items
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/RiepilogoApiItem'
      
    RiepilogoApiItem:
      type: object
      required:
        - erogatore
      properties:
        fruitore:
          $ref: 'govway_core.yaml#/components/schemas/SimpleName'
        erogatore:
          $ref: 'govway_core.yaml#/components/schemas/SimpleName'
        nome:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
        tipo: 
          $ref: 'govway_core.yaml#/components/schemas/Tipo'
        versione:
          $ref: 'govway_core.yaml#/components/schemas/Versione'



    # Ricerche Transazioni

    RicercaBaseTransazione:
      type: object
      required:
      - intervallo_temporale
      - tipo
      properties:
        offset:
          default: 0
          format: int32
          type: integer
        limit:
          format: int32
          type: integer
        sort:
          example: +name
          type: string
        intervallo_temporale:
          $ref: '#/components/schemas/FiltroTemporale'
        tipo:
          $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaRuoloTransazioneEnum'
        id_cluster:  
          description: >-
            Identificativo del nodo su cui e' stata emessa la transazione
          type: string
        tag:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
        api:
          $ref: '#/components/schemas/FiltroApiSoggetti'
        azione:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
        esito:
          $ref: '#/components/schemas/FiltroEsito'
        evento:  
          description: >-
            Evento da ricercare per una transazione
          type: string
     
    RicercaIntervalloTemporale:
      type: object
      allOf:
        - $ref: '#/components/schemas/RicercaBaseTransazione'
        - type: object
          description: >-
            Descrive le informazioni di filtraggio relative al mittente per la ricerca di transazioni e statistiche relative a fruizioni di servizio
          properties:
            mittente:
              discriminator:
                propertyName: identificazione
                mapping:
                  erogazione_soggetto:  '#/components/schemas/FiltroMittenteErogazioneSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  fruizione_applicativo:  '#/components/schemas/FiltroMittenteFruizioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'fruizioni'
                  erogazione_applicativo:  '#/components/schemas/FiltroMittenteErogazioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'        
                  erogazione_token_info: '#/components/schemas/FiltroMittenteTokenClaimSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  token_info: '#/components/schemas/FiltroMittenteTokenClaim'
                  indirizzo_ip:  '#/components/schemas/FiltroMittenteIndirizzoIP'           
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazioneSoggetto' 
                - $ref: '#/components/schemas/FiltroMittenteFruizioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteErogazioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
                - $ref: '#/components/schemas/FiltroMittenteTokenClaim' 
                - $ref: '#/components/schemas/FiltroMittenteTokenClaimSoggetto'
                - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'
              
    RicercaIdApplicativo:
      type: object
      allOf:
        - $ref: '#/components/schemas/RicercaBaseTransazione'
        - type: object
          required:
          - id_applicativo
          properties:
            id_applicativo:
              $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaId'


    # Ricerche Statistiche

    RicercaBaseStatistica:
      type: object
      required:
      - intervallo_temporale
      - tipo
      properties:
        unita_tempo:
          $ref: '#/components/schemas/UnitaTempoReportEnum'
        intervallo_temporale:
          $ref: '#/components/schemas/FiltroTemporale'
        tipo:
          $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaRuoloTransazioneEnum'
        id_cluster:  
          description: >-
            Identificativo del nodo su cui e' stata emessa la transazione
          type: string
        tag:
          $ref: 'govway_core.yaml#/components/schemas/NCName'

    RicercaBaseStatisticaSoggetti:
      type: object
      allOf:
        - $ref: '#/components/schemas/RicercaBaseStatistica'
        - type: object
          properties:
            api:
               $ref: '#/components/schemas/FiltroApiSoggetti'

    RicercaStatisticaAndamentoTemporale:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatisticaSoggetti'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReportMultiLine'
            azione:
              $ref: 'govway_core.yaml#/components/schemas/NCName'
            mittente:
              discriminator:
                propertyName: identificazione
                mapping:
                  erogazione_soggetto:  '#/components/schemas/FiltroMittenteErogazioneSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  fruizione_applicativo:  '#/components/schemas/FiltroMittenteFruizioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'fruizioni'
                  erogazione_applicativo:  '#/components/schemas/FiltroMittenteErogazioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'        
                  erogazione_token_info: '#/components/schemas/FiltroMittenteTokenClaimSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  token_info: '#/components/schemas/FiltroMittenteTokenClaim'
                  indirizzo_ip:  '#/components/schemas/FiltroMittenteIndirizzoIP'           
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazioneSoggetto' 
                - $ref: '#/components/schemas/FiltroMittenteFruizioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteErogazioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
                - $ref: '#/components/schemas/FiltroMittenteTokenClaim' 
                - $ref: '#/components/schemas/FiltroMittenteTokenClaimSoggetto'
                - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'
            esito:
              $ref: '#/components/schemas/FiltroEsito'

    RicercaStatisticaDistribuzioneEsiti:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatisticaSoggetti'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReport'
            azione:
              $ref: 'govway_core.yaml#/components/schemas/NCName'
            mittente:
              discriminator:
                propertyName: identificazione
                mapping:
                  erogazione_soggetto:  '#/components/schemas/FiltroMittenteErogazioneSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  fruizione_applicativo:  '#/components/schemas/FiltroMittenteFruizioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'fruizioni'
                  erogazione_applicativo:  '#/components/schemas/FiltroMittenteErogazioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'        
                  erogazione_token_info: '#/components/schemas/FiltroMittenteTokenClaimSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  token_info: '#/components/schemas/FiltroMittenteTokenClaim'
                  indirizzo_ip:  '#/components/schemas/FiltroMittenteIndirizzoIP'           
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazioneSoggetto' 
                - $ref: '#/components/schemas/FiltroMittenteFruizioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteErogazioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
                - $ref: '#/components/schemas/FiltroMittenteTokenClaim' 
                - $ref: '#/components/schemas/FiltroMittenteTokenClaimSoggetto'
                - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'

    RicercaStatisticaDistribuzioneErrori:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatisticaSoggetti'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReportDimensioni'
            azione:
              $ref: 'govway_core.yaml#/components/schemas/NCName'
            mittente:
              discriminator:
                propertyName: identificazione
                mapping:
                  erogazione_soggetto:  '#/components/schemas/FiltroMittenteErogazioneSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  fruizione_applicativo:  '#/components/schemas/FiltroMittenteFruizioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'fruizioni'
                  erogazione_applicativo:  '#/components/schemas/FiltroMittenteErogazioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'        
                  erogazione_token_info: '#/components/schemas/FiltroMittenteTokenClaimSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  token_info: '#/components/schemas/FiltroMittenteTokenClaim'
                  indirizzo_ip:  '#/components/schemas/FiltroMittenteIndirizzoIP'           
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazioneSoggetto' 
                - $ref: '#/components/schemas/FiltroMittenteFruizioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteErogazioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
                - $ref: '#/components/schemas/FiltroMittenteTokenClaim' 
                - $ref: '#/components/schemas/FiltroMittenteTokenClaimSoggetto'
                - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'
            esito:
              $ref: '#/components/schemas/FiltroEsito'

    RicercaStatisticaDistribuzioneSoggettoRemoto:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatistica'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReportDimensioni'
            api:
               $ref: '#/components/schemas/FiltroApiSoggetti'
            azione:
              $ref: 'govway_core.yaml#/components/schemas/NCName'
            mittente:
              discriminator:
                propertyName: identificazione
                mapping:
                  fruizione_applicativo:  '#/components/schemas/FiltroMittenteFruizioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'fruizioni'
                  identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'        
                  token_info: '#/components/schemas/FiltroMittenteTokenClaim'
                  indirizzo_ip:  '#/components/schemas/FiltroMittenteIndirizzoIP'           
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteFruizioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
                - $ref: '#/components/schemas/FiltroMittenteTokenClaim' 
                - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'
            esito:
              $ref: '#/components/schemas/FiltroEsito'

    RicercaStatisticaDistribuzioneSoggettoLocale:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatisticaSoggetti'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReportDimensioni'
            azione:
              $ref: 'govway_core.yaml#/components/schemas/NCName'
            mittente:
              discriminator:
                propertyName: identificazione
                mapping:
                  erogazione_soggetto:  '#/components/schemas/FiltroMittenteErogazioneSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  fruizione_applicativo:  '#/components/schemas/FiltroMittenteFruizioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'fruizioni'
                  erogazione_applicativo:  '#/components/schemas/FiltroMittenteErogazioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'        
                  erogazione_token_info: '#/components/schemas/FiltroMittenteTokenClaimSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  token_info: '#/components/schemas/FiltroMittenteTokenClaim'
                  indirizzo_ip:  '#/components/schemas/FiltroMittenteIndirizzoIP'           
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazioneSoggetto' 
                - $ref: '#/components/schemas/FiltroMittenteFruizioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteErogazioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
                - $ref: '#/components/schemas/FiltroMittenteTokenClaim' 
                - $ref: '#/components/schemas/FiltroMittenteTokenClaimSoggetto'
                - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'
            esito:
              $ref: '#/components/schemas/FiltroEsito'

    RicercaStatisticaDistribuzioneApi:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatistica'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReportDimensioni'
            soggetto_erogatore:
              $ref: 'govway_core.yaml#/components/schemas/BaseOggettoWithSimpleName' # utilizzabile solamente in filtri con tipologia transazioni 'fruizioni'
            distingui_api_implementata:
              type: boolean
              default: true
            mittente:
              discriminator:
                propertyName: identificazione
                mapping:
                  erogazione_soggetto:  '#/components/schemas/FiltroMittenteErogazioneSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  fruizione_applicativo:  '#/components/schemas/FiltroMittenteFruizioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'fruizioni'
                  erogazione_applicativo:  '#/components/schemas/FiltroMittenteErogazioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'        
                  erogazione_token_info: '#/components/schemas/FiltroMittenteTokenClaimSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  token_info: '#/components/schemas/FiltroMittenteTokenClaim'
                  indirizzo_ip:  '#/components/schemas/FiltroMittenteIndirizzoIP'           
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazioneSoggetto' 
                - $ref: '#/components/schemas/FiltroMittenteFruizioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteErogazioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
                - $ref: '#/components/schemas/FiltroMittenteTokenClaim' 
                - $ref: '#/components/schemas/FiltroMittenteTokenClaimSoggetto'
                - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'
            esito:
              $ref: '#/components/schemas/FiltroEsito'
 
    RicercaStatisticaDistribuzioneAzione:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatisticaSoggetti'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReportDimensioni'
            mittente:
              discriminator:
                propertyName: identificazione
                mapping:
                  erogazione_soggetto:  '#/components/schemas/FiltroMittenteErogazioneSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  fruizione_applicativo:  '#/components/schemas/FiltroMittenteFruizioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'fruizioni'
                  erogazione_applicativo:  '#/components/schemas/FiltroMittenteErogazioneApplicativo' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  identificativo_autenticato: '#/components/schemas/FiltroMittenteIdAutenticato'        
                  erogazione_token_info: '#/components/schemas/FiltroMittenteTokenClaimSoggetto' # utilizzabile solamente in filtri con tipologia transazioni 'erogazioni'
                  token_info: '#/components/schemas/FiltroMittenteTokenClaim'
                  indirizzo_ip:  '#/components/schemas/FiltroMittenteIndirizzoIP'           
              oneOf:
                - $ref: '#/components/schemas/FiltroMittenteErogazioneSoggetto' 
                - $ref: '#/components/schemas/FiltroMittenteFruizioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteErogazioneApplicativo'
                - $ref: '#/components/schemas/FiltroMittenteIdAutenticato'
                - $ref: '#/components/schemas/FiltroMittenteTokenClaim' 
                - $ref: '#/components/schemas/FiltroMittenteTokenClaimSoggetto'
                - $ref: '#/components/schemas/FiltroMittenteIndirizzoIP'
            esito:
              $ref: '#/components/schemas/FiltroEsito'

    RicercaStatisticaDistribuzioneApplicativo:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaBaseStatisticaSoggetti'
        - type: object
          required:
          - report
          properties:
            report:
              $ref: '#/components/schemas/OpzioniGenerazioneReportDimensioni'
            azione:
              $ref: 'govway_core.yaml#/components/schemas/NCName'
            esito:
              $ref: '#/components/schemas/FiltroEsito'

    RicercaStatisticaDistribuzioneApplicativoRegistrato:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'
        - type: object
          properties:
            tipo_identificazione_applicativo:
              $ref: '#/components/schemas/TipoIdentificazioneApplicativoEnum'
            soggetto_mittente:
              $ref: 'govway_core.yaml#/components/schemas/NCName'

    #RicercaStatisticaDistribuzioneIdAutenticato:
    #   type: object
    #   allOf:
    #    - $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'
    
    #RicercaStatisticaDistribuzioneIndirizzoIP:
    #   type: object
    #   allOf:
    #    - $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'

    RicercaStatisticaDistribuzioneTokenInfo:
       type: object
       allOf:
        - $ref: '#/components/schemas/RicercaStatisticaDistribuzioneApplicativo'
        - type: object
          required:
          - claim
          properties:
            claim:
              $ref: 'govway_core.yaml#/components/schemas/TokenClaimDistribuzioneStatisticaEnum'
            soggetto:
              $ref: 'govway_core.yaml#/components/schemas/BaseOggettoWithSimpleName' # utilizzabile solamente con tipologia di ricerca 'erogazioni'


    # Ricerche Report Configurazione

    RicercaConfigurazioneApi:
      type: object
      required:
      - tipo
      properties:
        tipo:
          $ref: 'govway_trace.yaml#/components/schemas/TransazioneRuoloEnum'
        api:
          $ref: '#/components/schemas/FiltroApiSoggetti'
        formato:
          $ref: '#/components/schemas/FormatoReportConfigEnum'

    # Filtri

    FiltroTemporale:
      type: object
      required:
        - data_inizio
        - data_fine
      properties:
        data_inizio:
          type: string
          format: date-time
        data_fine:
          type: string
          format: date-time

    FiltroApiBase:
      type: object
      properties:
        tipo:
          $ref: 'govway_core.yaml#/components/schemas/Tipo'
        nome:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
        versione:
          $ref: 'govway_core.yaml#/components/schemas/Versione'

    FiltroApiImplementata:
      type: object
      required:
        - nome
        - versione
      properties:
        referente:
          $ref: 'govway_core.yaml#/components/schemas/SimpleName'
        nome:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
        versione:
          $ref: 'govway_core.yaml#/components/schemas/Versione'

    FiltroApiSoggetti:
      type: object
      allOf:
      - $ref: '#/components/schemas/FiltroApiBase'
      - type: object
        properties:
          erogatore: # utilizzabile solamente in filtri con tipologia transazioni 'qualsiasi' o 'fruizioni'
              $ref: 'govway_core.yaml#/components/schemas/SimpleName'
          soggetto_remoto: # utilizzabile solamente in filtri con tipologia transazioni 'qualsiasi'
            $ref: 'govway_core.yaml#/components/schemas/SimpleName'
          api_implementata:
            $ref: '#/components/schemas/FiltroApiImplementata'
           
    FiltroEsito:
      type: object
      required:
        - tipo
      properties:
        tipo:
          $ref: '#/components/schemas/EsitoTransazioneFullSearchEnum'
        escludi_scartate:
          type: boolean
          default: false
          description: 'informazione utilizzata per escludere le richieste scartate; viene utilizzata solamente nel caso il tipo sia: qualsiasi, fallite, fallite_e_fault'
        codice: # da utilizzare solamente se il tipo di ricerca e' diverso da personalizzato
          type: integer
          format: int32 
        codici: # da utilizzare solamente se il tipo di ricerca e' personalizzato
           type: array
           items:
             type: integer
             format: int32

    FiltroMittenteErogazioneSoggetto:
      type: object
      required:
      - identificazione
      - soggetto
      properties:
        identificazione:
          $ref: '#/components/schemas/TipoFiltroMittenteEnum'
        soggetto:
          $ref: 'govway_core.yaml#/components/schemas/SimpleName'
    FiltroMittenteErogazioneApplicativo:
      type: object
      required:
      - identificazione
      - soggetto
      - applicativo
      properties:
        identificazione:
          $ref: '#/components/schemas/TipoFiltroMittenteEnum'
        tipo_identificazione_applicativo:
          $ref: '#/components/schemas/TipoIdentificazioneApplicativoEnum'
        soggetto:
          $ref: 'govway_core.yaml#/components/schemas/SimpleName'
        applicativo:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
    FiltroMittenteFruizioneApplicativo:
      type: object
      required:
      - identificazione
      - applicativo
      properties:
        identificazione:
          $ref: '#/components/schemas/TipoFiltroMittenteEnum'
        tipo_identificazione_applicativo:
          $ref: '#/components/schemas/TipoIdentificazioneApplicativoEnum'
        applicativo:
          $ref: 'govway_core.yaml#/components/schemas/NCName'
    FiltroMittenteIdAutenticato:
      type: object
      allOf:
        - $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaId'
        - type: object
          required:
          - identificazione
          - autenticazione
          properties:
            identificazione:
              $ref: '#/components/schemas/TipoFiltroMittenteEnum'
            autenticazione:
              $ref: '#/components/schemas/TipoFiltroMittenteIdentificativoAutenticatoEnum' 
    FiltroMittenteTokenClaimSoggetto:
      type: object
      allOf:
        - $ref: '#/components/schemas/FiltroMittenteTokenClaim'
        - type: object
          properties:
            soggetto:
              $ref: 'govway_core.yaml#/components/schemas/SimpleName'
    FiltroMittenteTokenClaim:
      type: object
      allOf:
        - $ref: '#/components/schemas/FiltroTokenClaimBase'
        - $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaId'
        - type: object
          required:
          - identificazione
          properties:
            identificazione:
              $ref: '#/components/schemas/TipoFiltroMittenteEnum'
    FiltroTokenClaimBase:
      type: object
      required:
      - claim
      properties:
        claim:
          $ref: 'govway_core.yaml#/components/schemas/TokenClaimSearchEnum'
    FiltroMittenteIndirizzoIP:
      type: object
      allOf:
        - $ref: 'govway_core.yaml#/components/schemas/FiltroRicercaId'
        - type: object
          required:
          - identificazione
          properties:
            identificazione:
              $ref: '#/components/schemas/TipoFiltroMittenteEnum'
            tipo:
              $ref: '#/components/schemas/TipoFiltroMittenteIndirizzoIPEnum' 
      
  

    # Enum
    EsitoTransazioneSimpleSearchEnum:
      type: string
      enum:
        - ok
        - fault
        - fallite
        - fallite_e_fault
        - errori_consegna
        - richieste_scartate
    EsitoTransazioneFullSearchEnum:
      type: string
      enum:
        - qualsiasi
        - ok
        - fault
        - fallite
        - fallite_e_fault
        - errori_consegna
        - richieste_scartate
        - personalizzato

    TipoFiltroMittenteEnum:
      type: string
      enum:
        - erogazione_soggetto     
        - fruizione_applicativo
        - erogazione_applicativo
        - identificativo_autenticato       
        - erogazione_token_info
        - token_info
        - indirizzo_ip

    TipoIdentificazioneApplicativoEnum:
      type: string
      enum:
        - trasporto
        - token
      default: trasporto

    TipoFiltroMittenteIdentificativoAutenticatoEnum:
      type: string
      enum:
        - basic
        - ssl
        - principal
        
    TipoFiltroMittenteIndirizzoIPEnum:
      type: string
      enum:
        - client_ip
        - x_forwarded_for
        
    TipoMessaggioEnum:
      type: string
      enum:
        - richiesta
        - risposta
        - conversazione
        - riferimento_richiesta
      example: richiesta
      
    TipoIdApplicativoEnum:
      type: string
      enum:
        - richiesta
        - risposta
      example: richiesta
            
    TipoReportEnum:
      type: string
      enum:
        - line
        - pie
        - bar
        - table
      example: line
      default: table
      
    FormatoReportEnum:
      type: string
      enum:
        - csv
        - pdf
        - xls
        - xml
        - json
      example: csv

    FormatoReportConfigEnum:
      type: string
      enum:
        - csv
        - xls
      example: csv
      
    UnitaTempoReportEnum:
      type: string
      enum:
        - orario
        - giornaliero
        - settimanale
        - mensile
      example: orario
      default: giornaliero
      
    TipoInformazioneReportEnum:
      type: string
      enum:
        - numero_transazioni
        - occupazione_banda
        - tempo_medio_risposta
      example: numero_transazioni
      default: numero_transazioni

    DimensioniReportEnum:
      type: string
      enum:
        - 2d
        - 3d
        - 3dcustom
      example: 2d
      default: 2d
      
    DimensioniReportCustomEnum:
      type: string
      enum:
        - tag
        - api
        - api_implementation
        - operation
        - local_organization
        - remote_organization
        - client_organization
        - provider_organization
        - token_issuer
        - token_clientid
        - token_subject
        - token_username
        - token_email
        - token_pdnd_organization
        - principal
        - client
        - token_client
        - ip_address
        - result
      example: tag
      default: tag

    OccupazioneBandaEnum:
      type: string
      enum:
        - banda_complessiva
        - banda_interna
        - banda_esterna
      example: banda_complessiva
      default: banda_complessiva
      
    TempoMedioRispostaEnum:
      type: string
      enum:
        - latenza_totale
        - latenza_servizio
        - latenza_gateway
      example: latenza_totale
      default: latenza_totale

    TokenClaimSearchEnum:
      type: string
      enum:
        - subject
        - issuer
        - client_id
        - username
        - email
        - pdnd_organization_name

    TokenClaimDistribuzioneStatisticaEnum:
      type: string
      enum:
        - subject
        - issuer
        - client_id
        - client_id_pdnd_informazioni
        - username
        - email
    
    ListaTracingPDND:
      type: object
      allOf:
        - $ref: 'govway_core.yaml#/components/schemas/ListaSenzaTotale'
        - type: object
          required:
          - items
          properties:
            items:
              type: array
              items:
                $ref: '#/components/schemas/ItemTracingPDND'

    ItemTracingPDND:
      type: object
      properties:
        data_tracciamento:
          type: string
          format: date
        data_registrazione:
          type: string
          format: date-time
        numero_tentativi:
          type: integer
          format: int32
          min: 0
        stato:
          $ref: '#/components/schemas/StatoTracing'
        stato_pdnd:
          $ref: '#/components/schemas/StatoTracingPDND'
        tracing_id:
          type: string
          format: uuid
        method:
          $ref: '#/components/schemas/MethodTracingPDND'
    
    StatoTracingPDND:
        type: string
        enum: ['Qualsiasi', 'Errore', 'Attesa', 'Ok']
    
    MethodTracingPDND:
        type: string
        enum: ['RECOVER', 'REPLACE', 'SUBMIT']
    
    StatoTracing:
        type: string
        enum: ['Qualsiasi', 'Fallita', 'Pubblicata']
