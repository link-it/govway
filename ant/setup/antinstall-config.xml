<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE installer PUBLIC "-//tp23 //DTD Ant Installer Config//EN" "http://antinstaller.sf.net/dtd/antinstall-config-0.8.dtd">
<installer name="GovWay Installer v3.3.9.p3" defaultImageResource="/logoSetup.png"
    ui="swing,text"
	verbose="false"
    windowIcon="/iconaSetup.png" wide="550:275" loadDefaults="true">
    
    <!-- Se si caricano i loadDefaults non funzionano piu' i cambi di stato per il db -->
    <!-- loadDefaults="true" > -->

    <page type="input" name="intro" displayText="Installer GovWay v3.3.9.p3">
        <comment explanatoryText=""/>
        <comment explanatoryText="Il software GovWay e' distribuito con licenza GPL v3"/>
        <comment explanatoryText=""/>
        <comment explanatoryText="Per maggiori informazioni sul prodotto:"/>
        <comment explanatoryText="       https://govway.org" bold="true"/>
        <comment explanatoryText="       https://link.it" bold="true"/>

	<hidden property="antinstaller_versione_attuale_con_p_level" value="3.3.9.p3"/> <!-- se presente indicare il patch o RC level (es. 3.2.1.rc1). Finisce nei jar -->
	<hidden property="antinstaller_versione_attuale" value="3.3.9"/>

        <!-- NOTA: le proprieta seguenti NON devono essere utilizzate al di fuori della ifProperty altrimenti su windows non vengono 
                considerati i valori iniziali presenti nel file ant.install.properties impostato nei comandi install.* -->
        <hidden property="antinstaller_conf_avanzata_enabled" value=""/>
	<hidden property="antinstaller_architettura_avanzata_enabled" value=""/>

	<!-- NOTA: la seguente proprietà per adesso disabilita la generazione del batch che si occupa di ripulire il database dei messaggi presi in carico 
		   La proprietà verrà attivata quando la funzionalità sarà rilasciata stabile.
	-->
        <hidden property="antinstaller_batchRuntimeRepository" value="false"/>
    </page>

    <page name="modalitaInstallazione" type="input" displayText="Modalità Installazione" ifProperty="${antinstaller_architettura_avanzata_enabled}!=true">
	<large-select defaultValue="nuova" property="antinstaller_modalita_installazione" displayText="">
            <option value="nuova" text="Nuova Installazione"/>
            <option value="aggiornamento" text="Aggiornamento"/>
        </large-select>	

	<!-- Proprieta gestita in caso di antinstaller_architettura_avanzata_enabled=true -->
	<hidden property="antinstaller_tipo_installazione" value="standard"/>

	<hidden property="antinstaller_config_db" value="runtime"/>
	<hidden property="antinstaller_log_db" value="runtime"/>
	<hidden property="antinstaller_index_transazioni" value="standard"/>
	<hidden property="antinstaller_stats_db" value="runtime"/>
	<hidden property="antinstaller_index_statistiche" value="standard"/>

	<hidden property="antinstaller_console_env" value="runtime"/>
	<hidden property="antinstaller_stats_env" value="runtime"/>

	<hidden property="antinstaller_gestione_nodi" value="static"/>
	<hidden property="antinstaller_gestione_nodi_group_id" value="GovWay"/>
	<hidden property="antinstaller_gestione_nodi_numeric_id_mode" value="static"/>
	<hidden property="antinstaller_gestione_nodi_numeric_id_cifre" value=""/>
	<hidden property="antinstaller_gestione_nodi_check_url" value=""/>
	<hidden property="antinstaller_gestione_nodi_check_username" value="GovWayNode"/>
	<hidden property="antinstaller_gestione_nodi_check_password" value=""/>
	<hidden property="antinstaller_gestione_nodi_proxy_url" value=""/>
	<hidden property="antinstaller_gestione_nodi_proxy_username" value="GovWayProxy"/>
	<hidden property="antinstaller_gestione_nodi_proxy_password" value=""/>

	<hidden property="antinstaller_batch_dir" value=""/>
	<hidden property="antinstaller_batch_system_out" value=""/>

    </page>

    <page name="modalitaInstallazioneAvanzata" type="input" displayText="Modalità Installazione" ifProperty="${antinstaller_architettura_avanzata_enabled}==true">
	<large-select defaultValue="nuova" property="antinstaller_modalita_installazione" displayText="Modalità">
            <option value="nuova" text="Nuova Installazione"/>
            <option value="aggiornamento" text="Aggiornamento"/>
        </large-select>	

	<comment displayText=""/>
        <large-select defaultValue="standard" property="antinstaller_tipo_installazione" displayText="Tipo">
            <option value="standard" text="Standard"/>
            <option value="avanzata" text="Avanzata"/>
        </large-select>
	
    </page>

    <page name="aggiornamentoSceltaVersione" type="input" displayText="Informazioni Prodotto"
	  ifProperty="${antinstaller_modalita_installazione}==aggiornamento">

	<large-select defaultValue="" property="antinstaller_versione_precedente" displayText="Versione Precedente">
	    <option value="3.3.8" text="3.3.8"/>
	    <option value="3.3.7" text="3.3.7"/>
	    <option value="3.3.6" text="3.3.6"/>
	    <option value="3.3.5" text="3.3.5"/>
	    <option value="3.3.4" text="3.3.4"/>
	    <option value="3.3.3" text="3.3.3"/>
	    <option value="3.3.2" text="3.3.2"/>
	    <option value="3.3.1" text="3.3.1"/>
	    <option value="3.3.0" text="3.3.0"/>
	    <option value="3.2.2" text="3.2.2"/>
	    <option value="3.2.1" text="3.2.1"/>
	    <option value="3.2.0" text="3.2.0"/>
	    <option value="3.1.1" text="3.1.1"/>
	    <option value="3.1.0" text="3.1.0"/>
	    <option value="3.0.1" text="3.0.1"/>
	    <option value="3.0.0" text="3.0.0"/>
        </large-select>
    </page>

    <page name="informazioniPreliminari_nuovaInstallazione" type="input" displayText="Informazioni Preliminari"
	ifProperty="${antinstaller_modalita_installazione}==nuova">
                       
        <!-- <comment displayText="Directory di lavoro" bold="true"/>  sotto come display c'era path -->
        <directory defaultValue="/etc/govway" defaultValueWin="C:\govway" displayText="Directory di lavoro"
            property="antinstaller_directory_lavoro_openspcoop" checkExists="false" />
        
        <comment displayText=""/>

        <!-- <comment displayText="Directory di log" bold="true"/>  sotto come display c'era path -->
        <directory defaultValue="/var/log/govway" defaultValueWin="C:\govway\log" displayText="Directory di log"
            property="antinstaller_directory_log_openspcoop" checkExists="false" />

        <comment displayText=""/>
        
        <!-- <comment displayText="Application Server" bold="true"/>  sotto come display c'era tipo -->
        <large-select defaultValue="wildfly25" property="antinstaller_as" displayText="Application Server">
      
		<!-- Uniformare i valori quando la compilazione e' identica -->
		<option value="wildfly25" text="WildFly 25-26"/>
		<option value="wildfly22" text="WildFly 22-24"/>
		<option value="wildfly18" text="WildFly 18-21"/>
		<!--
			Deprecati: 10, 11, 12, 13, 14, 15, 15, 17
			<option value="wildfly10" text="WildFly 10-17"/>
		-->
		<!--
			Deprecati
			<option value="wildfly9" text="WildFly 9"/>
			<option value="wildfly8" text="WildFly 8"/>
		-->
		<!--
			Deprecati 
			<option value="jboss7" text="JBoss 7"/>
			<option value="jboss6" text="JBoss 6"/>
			<option value="jboss5" text="JBoss 5"/>
	    		<option value="jboss4" text="JBoss 4"/>
		-->
           
		<!-- Se si introduce un nuovo valore, occhio a sistemare la maschera preinstallazioneCheckCompatibilita --> 
            	<option value="tomcat9" text="Apache Tomcat 9"/>
		<!-- 
			Deprecati
			<option value="tomcat8" text="Apache Tomcat 8-9"/>
			<option value="tomcat7" text="Apache Tomcat 7"/>
            		<option value="tomcat6" text="Apache Tomcat 6"/>
			<option value="tomcat5" text="Apache Tomcat 5"/> 
		-->
        </large-select>
        
        <comment displayText=""/>
        
        <!-- <comment displayText="DB Platform" bold="true"/>  sotto come display c'era tipo -->
        <large-select defaultValue="postgresql" property="antinstaller_tipo_database" displayText="DBMS">
            <option value="postgresql" text="PostgreSQL"/>
            <option value="mysql" text="MySQL"/>
	    <!-- <option value="mariadb" text="MariaDB"/> TODO -->
  	    <!-- <option value="mysql" text="MariaDB"/> -->
            <option value="oracle" text="Oracle"/>
            <option value="hsql" text="HyperSQL"/>
            <option value="sqlserver" text="SQLServer"/>
            <!-- <option value="db2" text="IBM DB2"/> -->
        </large-select>
                
    </page> 

    <page name="informazioniPreliminari_aggiornamento" type="input" displayText="Informazioni Preliminari"
	ifProperty="${antinstaller_modalita_installazione}==aggiornamento">
                       
        <!-- <comment displayText="Directory di lavoro" bold="true"/>  sotto come display c'era path -->
        <directory defaultValue="/etc/govway" defaultValueWin="C:\govway" displayText="Directory di lavoro"
            property="antinstaller_directory_lavoro_openspcoop" checkExists="false" />
        
        <comment displayText=""/>

        <!-- <comment displayText="Directory di log" bold="true"/>  sotto come display c'era path -->
        <directory defaultValue="/var/log/govway" defaultValueWin="C:\govway\log" displayText="Directory di log"
            property="antinstaller_directory_log_openspcoop" checkExists="false" />
        
        <comment displayText=""/>
        
        <!-- <comment displayText="Application Server" bold="true"/>  sotto come display c'era tipo -->
        <large-select defaultValue="wildfly25" property="antinstaller_as" displayText="Application Server">
      
		<!-- Uniformare i valori quando la compilazione e' identica -->
		<option value="wildfly25" text="WildFly 25-26"/>
		<option value="wildfly22" text="WildFly 22-24"/>
		<option value="wildfly18" text="WildFly 18-21"/>
		<!--
			Deprecati: 10, 11, 12, 13, 14, 15, 16, 17
			<option value="wildfly10" text="WildFly 10-17"/>
		-->
		<!--
			Deprecati
			<option value="wildfly9" text="WildFly 9"/>
			<option value="wildfly8" text="WildFly 8"/>
		-->
		<!--
			Deprecati 
			<option value="jboss7" text="JBoss 7"/>
			<option value="jboss6" text="JBoss 6"/>
			<option value="jboss5" text="JBoss 5"/>
	    		<option value="jboss4" text="JBoss 4"/>
		-->
           
		<!-- Se si introduce un nuovo valore, occhio a sistemare la maschera preinstallazioneCheckCompatibilita -->
		<option value="tomcat9" text="Apache Tomcat 9"/> 
            	<!-- 
			Deprecati
		    	<option value="tomcat8" text="Apache Tomcat 8-9"/>
			<option value="tomcat7" text="Apache Tomcat 7"/>
			<option value="tomcat6" text="Apache Tomcat 6"/>
			<option value="tomcat5" text="Apache Tomcat 5"/> 
		-->
        </large-select>

        <comment displayText=""/>

	<comment bold="true" displayText="Attenzione:"/>
	<comment displayText="Deve essere indicato lo stesso DBMS della precedente installazione"/>
        
        <!-- <comment displayText="DB Platform" bold="true"/>  sotto come display c'era tipo -->
        <large-select defaultValue="postgresql" property="antinstaller_tipo_database" displayText="DBMS">
            <option value="postgresql" text="PostgreSQL"/>
            <option value="mysql" text="MySQL"/>
	    <!-- <option value="mariadb" text="MariaDB"/> TODO -->
  	    <!-- <option value="mysql" text="MariaDB"/> -->
            <option value="oracle" text="Oracle"/>
            <option value="hsql" text="HyperSQL"/>
            <option value="sqlserver" text="SQLServer"/>
            <!-- <option value="db2" text="IBM DB2"/> -->
        </large-select>
                
    </page> 

    <page name="informazioniPreliminari_nuovaInstallazione" type="input" displayText="Informazioni Dispiegamento"
	ifProperty="(${antinstaller_tipo_installazione}==avanzata) AND (${antinstaller_tipo_database}!=mysql) AND (${antinstaller_tipo_database}!=db2)">

	<comment displayText="DBMS" bold="true"/>
	<!-- <large-select defaultValue="standard" property="antinstaller_runtime_db" displayText="Runtime">
            <option value="runtime" text="Runtime"/>
        </large-select> -->
	<large-select defaultValue="runtime" property="antinstaller_config_db" displayText="Configurazione">
            <option value="runtime" text="Utilizza stesso database del Runtime"/>
	    <option value="config" text="Database dedicato alla Configurazione"/>
        </large-select>
	<large-select defaultValue="runtime" property="antinstaller_log_db" displayText="Tracce">
            <option value="runtime" text="Utilizza stesso database del Runtime"/>
	    <option value="log" text="Database dedicato alle Tracce"/>
        </large-select>
	<large-select defaultValue="full" property="antinstaller_index_transazioni" displayText="">
            <option value="standard" text="Standard"/>
	    <option value="full" text="Full Index"/>
        </large-select>
	<large-select defaultValue="runtime" property="antinstaller_stats_db" displayText="Statistiche">
            <option value="runtime" text="Utilizza stesso database del Runtime"/>
	    <option value="log" text="Utilizza stesso database delle Tracce"/>
	    <option value="stats" text="Database dedicato alle Statistiche"/>
        </large-select>
	<large-select defaultValue="full" property="antinstaller_index_statistiche" displayText="">
            <option value="standard" text="Standard"/>
	    <option value="full" text="Full Index"/>
        </large-select>

	<!-- <comment displayText=""/> -->

	<comment displayText="Componenti Applicative" bold="true"/>
	<large-select defaultValue="runtime" property="antinstaller_console_env" displayText="Configurazione e Monitoraggio">
            <option value="runtime" text="Utilizza stesso ambiente del Runtime"/>
	    <option value="manager" text="Ambiente dedicato"/>
        </large-select>
	<large-select defaultValue="runtime" property="antinstaller_stats_env" displayText="Generazione delle Statistiche">
            <option value="runtime" text="Utilizza stesso ambiente del Runtime"/>
	    <option value="batch" text="Generazione tramite Applicazione Batch"/>
            <option value="runtime_batchPrepared" text="Utilizza Runtime, predispone Batch"/>
        </large-select>
	<large-select defaultValue="statica" property="antinstaller_gestione_nodi" displayText="Gestione dei Nodi">
            <option value="static" text="Statica"/>
	    <option value="dynamic" text="Dinamica"/>
        </large-select>

	<!-- Utilizzabile su sistemi di provisioning avanzati -->
	<hidden property="antinstaller_batch_dir" value=""/>
	<hidden property="antinstaller_batch_system_out" value=""/>

    </page>

    <page name="informazioniPreliminari_nuovaInstallazione_mysql_or_db2" type="input" displayText="Informazioni Dispiegamento"
	ifProperty="(${antinstaller_tipo_installazione}==avanzata) AND (${antinstaller_tipo_database}==mysql) OR (${antinstaller_tipo_database}==db2)">

	<comment displayText="DBMS" bold="true"/>
	<!-- <large-select defaultValue="standard" property="antinstaller_runtime_db" displayText="Runtime">
            <option value="runtime" text="Runtime"/>
        </large-select> -->
	<large-select defaultValue="runtime" property="antinstaller_config_db" displayText="Configurazione">
            <option value="runtime" text="Utilizza stesso database del Runtime"/>
	    <option value="config" text="Database dedicato alla Configurazione"/>
        </large-select>
	<large-select defaultValue="runtime" property="antinstaller_log_db" displayText="Tracce">
            <option value="runtime" text="Utilizza stesso database del Runtime"/>
	    <option value="log" text="Database dedicato alle Tracce"/>
        </large-select>
	<hidden property="antinstaller_index_transazioni" value="standard"/>
	<large-select defaultValue="runtime" property="antinstaller_stats_db" displayText="Statistiche">
            <option value="runtime" text="Utilizza stesso database del Runtime"/>
	    <option value="log" text="Utilizza stesso database della Tracce"/>
	    <option value="stats" text="Database dedicato alle Statistiche"/>
        </large-select>
	<hidden property="antinstaller_index_statistiche" value="standard"/>

	<!-- <comment displayText=""/> -->

	<comment displayText="Componenti Applicative" bold="true"/>
	<large-select defaultValue="runtime" property="antinstaller_console_env" displayText="Configurazione e Monitoraggio">
            <option value="runtime" text="Utilizza stesso ambiente del Runtime"/>
	    <option value="manager" text="Ambiente dedicato"/>
        </large-select>
	<large-select defaultValue="runtime" property="antinstaller_stats_env" displayText="Generazione delle Statistiche">
            <option value="runtime" text="Utilizza stesso ambiente del Runtime"/>
	    <option value="batch" text="Generazione tramite Applicazione Batch"/>
            <option value="runtime_batchPrepared" text="Utilizza Runtime, predispone Batch"/>
        </large-select>
	<large-select defaultValue="statica" property="antinstaller_gestione_nodi" displayText="Gestione dei Nodi">
            <option value="static" text="Statica"/>
	    <option value="dynamic" text="Dinamica"/>
        </large-select>

	<!-- Utilizzabile su sistemi di provisioning avanzati -->
	<hidden property="antinstaller_batch_dir" value=""/>
	<hidden property="antinstaller_batch_system_out" value=""/>

    </page>

    <page name="infoDB_oracle" type="input" displayText="Informazioni DataSource" ifProperty="${antinstaller_tipo_database}==oracle">
        <validated defaultValue="127.0.0.1" property="antinstaller_dbhost" displayText="Hostname"
            regex=".+"/>
        <hidden property="porta-db" value="1521"/>
        <hidden property="TABLESPACE" value="XE"/>
        <hidden property="antinstaller_driver_jdbc_classname" value="oracle.jdbc.OracleDriver"/>
	<hidden property="antinstaller_driver_jdbc" value="NOME_DRIVER_JDBC.jar"/>
        <validated defaultValue="${porta-db}" regex="^[0-9]{1,5}$" property="antinstaller_dbport"
            displayText="Porta"/>

 	<large-select defaultValue="SID" property="antinstaller_oracle_mode" displayText="Tipo Accesso">
            <option value="SID" text="SID"/>
            <option value="serviceName" text="Service Name"/>
        </large-select>
        <validated defaultValue="${TABLESPACE}" property="antinstaller_dbname"
            displayText="Nome Database" regex=".+"/>

        <validated defaultValue="govway" property="antinstaller_dbusername"
            displayText="Username" regex=".+"/>
        <validated defaultValue="govway" property="antinstaller_dbpassword"
            displayText="Password" regex=".+"/>
    </page>

    <page name="infoDB_notOracle" type="input" displayText="Informazioni DataSource" ifProperty="${antinstaller_tipo_database}!=oracle">
        <validated defaultValue="127.0.0.1" property="antinstaller_dbhost" displayText="Hostname"
            regex=".+"/>
        <hidden property="antinstaller_driver_jdbc" value="NOME_DRIVER_JDBC.jar"/>
        <conditional ifProperty="${antinstaller_tipo_database}=postgresql">
            <hidden property="porta-db" value="5432"/>
            <hidden property="TABLESPACE" value="govway"/>
            <hidden property="antinstaller_driver_jdbc_classname" value="org.postgresql.Driver"/>
        </conditional>
        <conditional ifProperty="${antinstaller_tipo_database}=mysql">
            <hidden property="porta-db" value="3306"/>
            <hidden property="TABLESPACE" value="govway"/>
            <hidden property="antinstaller_driver_jdbc_classname" value="com.mysql.jdbc.Driver"/>
        </conditional>
        <conditional ifProperty="${antinstaller_tipo_database}=hsql">
            <hidden property="porta-db" value="9001"/>
            <hidden property="TABLESPACE" value="govway"/>
            <hidden property="antinstaller_driver_jdbc_classname" value="org.hsqldb.jdbcDriver"/>
        </conditional>
        <conditional ifProperty="${antinstaller_tipo_database}=sqlserver">
            <hidden property="porta-db" value="1433"/>
            <hidden property="TABLESPACE" value="govway"/>
            <hidden property="antinstaller_driver_jdbc_classname" value="com.microsoft.sqlserver.jdbc.SQLServerDriver"/>
        </conditional>
		<conditional ifProperty="${antinstaller_tipo_database}=db2">
            <hidden property="porta-db" value="50000"/>
            <hidden property="TABLESPACE" value="govway"/>
            <hidden property="antinstaller_driver_jdbc_classname" value="com.ibm.db2.jcc.DB2Driver"/>
        </conditional>
        <validated defaultValue="${porta-db}" regex="^[0-9]{1,5}$" property="antinstaller_dbport"
            displayText="Porta"/>

        <validated defaultValue="${TABLESPACE}" property="antinstaller_dbname"
            displayText="Nome Database" regex=".+"/>

        <validated defaultValue="govway" property="antinstaller_dbusername"
            displayText="Username" regex=".+"/>
        <validated defaultValue="govway" property="antinstaller_dbpassword"
            displayText="Password" regex=".+"/>
    </page>

    <page name="infoDB_config_oracle" type="input" displayText="Informazioni DataSource dedicato alle Configurazioni" ifProperty="(${antinstaller_tipo_installazione}==avanzata) AND (${antinstaller_tipo_database}==oracle) AND (${antinstaller_config_db}==config)">
        <validated defaultValue="127.0.0.1" property="antinstaller_dbhost_config" displayText="Hostname"
            regex=".+"/>
        <validated defaultValue="${porta-db}" regex="^[0-9]{1,5}$" property="antinstaller_dbport_config"
            displayText="Porta"/>

 	<large-select defaultValue="SID" property="antinstaller_oracle_mode_config" displayText="Tipo Accesso">
            <option value="SID" text="SID"/>
            <option value="serviceName" text="Service Name"/>
        </large-select>
        <validated defaultValue="${TABLESPACE}" property="antinstaller_dbname_config"
            displayText="Nome Database" regex=".+"/>

        <validated defaultValue="govway" property="antinstaller_dbusername_config"
            displayText="Username" regex=".+"/>
        <validated defaultValue="govway" property="antinstaller_dbpassword_config"
            displayText="Password" regex=".+"/>
    </page>

    <page name="infoDB_config_notOracle" type="input" displayText="Informazioni DataSource dedicato alle Configurazioni" ifProperty="(${antinstaller_tipo_installazione}==avanzata) AND (${antinstaller_tipo_database}!=oracle) AND (${antinstaller_config_db}==config)">
        <validated defaultValue="127.0.0.1" property="antinstaller_dbhost_config" displayText="Hostname"
            regex=".+"/>
        <validated defaultValue="${porta-db}" regex="^[0-9]{1,5}$" property="antinstaller_dbport_config"
            displayText="Porta"/>

        <validated defaultValue="${TABLESPACE}" property="antinstaller_dbname_config"
            displayText="Nome Database" regex=".+"/>

        <validated defaultValue="govway" property="antinstaller_dbusername_config"
            displayText="Username" regex=".+"/>
        <validated defaultValue="govway" property="antinstaller_dbpassword_config"
            displayText="Password" regex=".+"/>
    </page>

    <page name="infoDB_log_oracle" type="input" displayText="Informazioni DataSource dedicato alle Tracce" ifProperty="(${antinstaller_tipo_installazione}==avanzata) AND (${antinstaller_tipo_database}==oracle) AND (${antinstaller_log_db}==log)">
        <validated defaultValue="127.0.0.1" property="antinstaller_dbhost_log" displayText="Hostname"
            regex=".+"/>
        <validated defaultValue="${porta-db}" regex="^[0-9]{1,5}$" property="antinstaller_dbport_log"
            displayText="Porta"/>

 	<large-select defaultValue="SID" property="antinstaller_oracle_mode_log" displayText="Tipo Accesso">
            <option value="SID" text="SID"/>
            <option value="serviceName" text="Service Name"/>
        </large-select>
        <validated defaultValue="${TABLESPACE}" property="antinstaller_dbname_log"
            displayText="Nome Database" regex=".+"/>

        <validated defaultValue="govway" property="antinstaller_dbusername_log"
            displayText="Username" regex=".+"/>
        <validated defaultValue="govway" property="antinstaller_dbpassword_log"
            displayText="Password" regex=".+"/>
    </page>

    <page name="infoDB_log_notOracle" type="input" displayText="Informazioni DataSource dedicato alle Tracce" ifProperty="(${antinstaller_tipo_installazione}==avanzata) AND (${antinstaller_tipo_database}!=oracle) AND (${antinstaller_log_db}==log)">
        <validated defaultValue="127.0.0.1" property="antinstaller_dbhost_log" displayText="Hostname"
            regex=".+"/>
        <validated defaultValue="${porta-db}" regex="^[0-9]{1,5}$" property="antinstaller_dbport_log"
            displayText="Porta"/>

        <validated defaultValue="${TABLESPACE}" property="antinstaller_dbname_log"
            displayText="Nome Database" regex=".+"/>

        <validated defaultValue="govway" property="antinstaller_dbusername_log"
            displayText="Username" regex=".+"/>
        <validated defaultValue="govway" property="antinstaller_dbpassword_log"
            displayText="Password" regex=".+"/>
    </page>

    <page name="infoDB_stats_oracle" type="input" displayText="Informazioni DataSource dedicato alle Statistiche" ifProperty="(${antinstaller_tipo_installazione}==avanzata) AND (${antinstaller_tipo_database}==oracle) AND (${antinstaller_stats_db}==stats)">
        <validated defaultValue="127.0.0.1" property="antinstaller_dbhost_stats" displayText="Hostname"
            regex=".+"/>
        <validated defaultValue="${porta-db}" regex="^[0-9]{1,5}$" property="antinstaller_dbport_stats"
            displayText="Porta"/>

 	<large-select defaultValue="SID" property="antinstaller_oracle_mode_stats" displayText="Tipo Accesso">
            <option value="SID" text="SID"/>
            <option value="serviceName" text="Service Name"/>
        </large-select>
        <validated defaultValue="${TABLESPACE}" property="antinstaller_dbname_stats"
            displayText="Nome Database" regex=".+"/>

        <validated defaultValue="govway" property="antinstaller_dbusername_stats"
            displayText="Username" regex=".+"/>
        <validated defaultValue="govway" property="antinstaller_dbpassword_stats"
            displayText="Password" regex=".+"/>
    </page>

    <page name="infoDB_stats_notOracle" type="input" displayText="Informazioni DataSource dedicato alle Statistiche" ifProperty="(${antinstaller_tipo_installazione}==avanzata) AND (${antinstaller_tipo_database}!=oracle) AND (${antinstaller_stats_db}==stats)">
        <validated defaultValue="127.0.0.1" property="antinstaller_dbhost_stats" displayText="Hostname"
            regex=".+"/>
        <validated defaultValue="${porta-db}" regex="^[0-9]{1,5}$" property="antinstaller_dbport_stats"
            displayText="Porta"/>

        <validated defaultValue="${TABLESPACE}" property="antinstaller_dbname_stats"
            displayText="Nome Database" regex=".+"/>

        <validated defaultValue="govway" property="antinstaller_dbusername_stats"
            displayText="Username" regex=".+"/>
        <validated defaultValue="govway" property="antinstaller_dbpassword_stats"
            displayText="Password" regex=".+"/>
    </page>

    <page name="informazioniPreliminari_dispiegamento_dinamico" type="input" displayText="Dispiegamento Dinamico"
	ifProperty="(${antinstaller_tipo_installazione}==avanzata) AND (${antinstaller_gestione_nodi}==dynamic)">

	<hidden property="antinstaller_gestione_nodi_group_id" value="GovWay"/>

	<hidden property="antinstaller_gestione_nodi_numeric_id_mode" value="dynamic"/>
	<hidden property="antinstaller_gestione_nodi_numeric_id_cifre" value="1"/>

	<comment displayText="Servizio 'Check'" bold="true" />
	<validated defaultValue="https://INDICARE_HOSTNAME/govway/check" property="antinstaller_gestione_nodi_check_url" displayText="URL" regex="http(s?):\/\/(.+)\/(.*)"/>
	<hidden property="antinstaller_gestione_nodi_check_username" value="GovWayNode"/>
	<hidden property="antinstaller_gestione_nodi_check_password" value=""/>

	<comment displayText="" />

        <comment displayText="Servizio 'Proxy'" bold="true" />
	<validated defaultValue="https://INDICARE_HOSTNAME/govway/proxy" property="antinstaller_gestione_nodi_proxy_url" displayText="URL" regex="http(s?):\/\/(.+)\/(.*)"/>
	<hidden property="antinstaller_gestione_nodi_proxy_username" value="GovWayProxy"/>
	<hidden property="antinstaller_gestione_nodi_proxy_password" value=""/>

    </page>

    <page name="utenzeConsole" type="input" displayText="Configurazione Utenze"
	ifProperty="${antinstaller_modalita_installazione}==nuova">

		<validated defaultValue="amministratore" property="antinstaller_pddconsole_username" displayText="Username Amministratore (govwayConsole)" regex="^[0-9A-Za-z]+$"/>
		<validated property="antinstaller_pddconsole_password" displayText="Password Amministratore" regex="^[^ &amp;]+$" />

		<comment displayText=""/>	
		
		<validated defaultValue="operatore" property="antinstaller_pddmonitor_username" displayText="Username Operatore (govwayMonitor)" regex="^[0-9A-Za-z]+$"/>
		<validated property="antinstaller_pddmonitor_password" displayText="Password Operatore" regex="^[^ &amp;]+$" />

		<comment displayText=""/>	

		<comment displayText="Raccomandazioni sulla password sono indicate di seguito:" bold="true"/>
		<comment displayText="- non deve contenere spazi e/o il carattere '&amp;'"/>
		<comment displayText="- differente dall'username e contenga almeno 8 caratteri"/>
		<comment displayText="- contenga almeno un carattere alfabetico, un numero ed un simbolo non alfanumerico"/>

    </page>

    <page name="serviziRs" type="input" displayText="Configurazione Servizi">

	<comment displayText="API Rest" bold="true"/>
        <checkbox defaultValue="false" property="antinstaller_rs_config" value="rsConfig" displayText="API di Configurazione"/>
        <checkbox defaultValue="false" property="antinstaller_rs_monitor" value="rsMonitor" displayText="API di Monitoraggio"/>

	<comment displayText=""/>

	<comment displayText="API Health Check" bold="true"/>
        <checkbox defaultValue="false" property="antinstaller_rs_rest_status" value="rsRestStatus" displayText="API REST"/>
        <checkbox defaultValue="false" property="antinstaller_rs_soap_status" value="rsSoapStatus" displayText="API SOAP"/>

    </page>

    <page name="profili_nuovaInstallazione" type="input" displayText="Profili di Interoperabilità"
	ifProperty="${antinstaller_modalita_installazione}==nuova">

        <comment displayText="Profilo" bold="true"/>
        <checkbox defaultValue="true" property="antinstaller_protocollo_trasparente" force="true" value="trasparente" displayText="API Gateway"/>
	<checkbox defaultValue="false" property="antinstaller_protocollo_modipa" value="modipa" displayText="ModI"/>
        <checkbox defaultValue="false" property="antinstaller_protocollo_spcoop" value="spcoop" displayText="SPCoop"/>
	<checkbox defaultValue="false" property="antinstaller_protocollo_as4" value="as4" displayText="eDelivery"/>
        <checkbox defaultValue="false" property="antinstaller_protocollo_sdi" value="sdi" displayText="Fatturazione Elettronica"/>
         

	<comment displayText=""/>	
        <!-- <comment displayText="Soggetto della PdD" bold="true"/> -->
        <hidden property="antinstaller_tiposoggetto_trasparente" value="gw"/>
        <hidden property="antinstaller_tiposoggetto_as4" value="as4"/>
	<hidden property="antinstaller_tiposoggetto_modipa" value="modipa"/>
        <hidden property="antinstaller_tiposoggetto_spcoop" value="spc"/>
        <hidden property="antinstaller_tiposoggetto_sdi" value="sdi"/>
        <validated defaultValue="" property="antinstaller_nomesoggetto" displayText="Soggetto" regex="^[0-9A-Za-z]+$"/>
        
    </page>

    <page name="profili_aggiornamento" type="input" displayText="Profili di Interoperabilità"
	ifProperty="${antinstaller_modalita_installazione}==aggiornamento">

	<hidden property="antinstaller_pddconsole_username" value=""/>
        <hidden property="antinstaller_pddconsole_password" value=""/>
        <hidden property="antinstaller_pddmonitor_username" value=""/>
        <hidden property="antinstaller_pddmonitor_password" value=""/>

	<comment bold="true" displayText="Attenzione:"/>
	<comment displayText="Devono essere selezionati almeno gli stessi profili della precedente installazione"/>

        <comment displayText="Profilo" bold="true"/>
        <checkbox defaultValue="true" property="antinstaller_protocollo_trasparente" force="true" value="trasparente" displayText="API Gateway"/>
	<checkbox defaultValue="false" property="antinstaller_protocollo_modipa" value="modipa" displayText="ModI"/>
        <checkbox defaultValue="false" property="antinstaller_protocollo_spcoop" value="spcoop" displayText="SPCoop"/>
	<checkbox defaultValue="false" property="antinstaller_protocollo_as4" value="as4" displayText="eDelivery"/>
        <checkbox defaultValue="false" property="antinstaller_protocollo_sdi" value="sdi" displayText="Fatturazione Elettronica"/>
         

		<comment displayText=""/>	
        <!-- <comment displayText="Soggetto della PdD" bold="true"/> -->
        <hidden property="antinstaller_tiposoggetto_trasparente" value="gw"/>
        <hidden property="antinstaller_tiposoggetto_as4" value="as4"/>
	<hidden property="antinstaller_tiposoggetto_modipa" value="modipa"/>
        <hidden property="antinstaller_tiposoggetto_spcoop" value="spc"/>
        <hidden property="antinstaller_tiposoggetto_sdi" value="sdi"/>
        <validated defaultValue="" property="antinstaller_nomesoggetto" displayText="Soggetto" regex="^[0-9A-Za-z]+$"/>
        
    </page>
    
    <page name="preinstallazioneStato" type="input" displayText="Configurazione Avanzata" ifProperty="(${antinstaller_conf_avanzata_enabled}==true) AND (${antinstaller_as}!=tomcat5) AND (${antinstaller_as}!=tomcat6) AND (${antinstaller_as}!=tomcat7) AND (${antinstaller_as}!=tomcat8) AND (${antinstaller_as}!=tomcat9)">

	<comment bold="true" displayText="Presa in carico"/>
	<checkbox defaultValue="false" property="antinstaller_stateful" displayText="Attivazione tramite broker JMS"/>
	<checkbox defaultValue="false" property="antinstaller_timer_consegna" displayText="Timer consegna notifiche"/>
	<checkbox defaultValue="false" property="antinstaller_integration_manager" displayText="Servizio IntegrationManager/MessageBox"/>	

	<comment displayText=""/>
	<comment bold="true" displayText="Endpoint protetto tramite Security Constraint"/>
	<checkbox defaultValue="true" property="antinstaller_sec_container" displayText="Contesto 'govwaySec'"/>

    </page>

    <page name="preinstallazioneStato" type="input" displayText="Configurazione Avanzata" ifProperty="(${antinstaller_conf_avanzata_enabled}==true) AND (${antinstaller_as}==tomcat5) OR (${antinstaller_as}==tomcat6) OR (${antinstaller_as}==tomcat7) OR (${antinstaller_as}==tomcat8) OR (${antinstaller_as}==tomcat9)">

	<comment displayText="Attenzione: la scelta dell'Application Server Tomcat"/>
	<comment displayText="   impedisce l'utilizzo della funzionalità 'Presa in carico' con attivazione tramite broker JMS."/>
	<comment displayText="Tornare al pannello precedente e scegliere un A.S. differente o procedere con la funzionalità disabilitata"/>

	<comment bold="true" displayText="Presa in carico"/>
	<checkbox defaultValue="false" property="antinstaller_stateful" force="true" displayText="Attivazione tramite broker JMS"/>
	<checkbox defaultValue="false" property="antinstaller_timer_consegna" displayText="Timer consegna notifiche"/>
	<checkbox defaultValue="false" property="antinstaller_integration_manager" displayText="Servizio IntegrationManager/MessageBox"/>	

	<comment displayText=""/>
	<comment bold="true" displayText="Endpoint protetto tramite Security Constraint"/>
	<checkbox defaultValue="false" property="antinstaller_sec_container" displayText="Contesto 'govwaySec'"/>

    </page>

    <page name="preinstallazioneEDelivery" type="input" displayText="Configurazione Profilo eDelivery (1/3)" ifProperty="${antinstaller_protocollo_as4}==true">

	<comment displayText="Domibus v4.x" bold="true"/>  
      
	<comment displayText=""/>
	<large-select defaultValue="wildfly12" property="antinstaller_as4_as" displayText="Application Server">
            <option value="tomcat" text="Apache Tomcat"/>
            <option value="wildfly12" text="WildFly 12"/>
        </large-select>

	<comment displayText=""/>
       <large-select defaultValue="mysql" property="antinstaller_as4_tipo_database" displayText="DBMS">
            <option value="mysql" text="MySQL"/>
            <option value="oracle" text="Oracle"/>
        </large-select>

    </page>

    <page name="preinstallazioneEDelivery2a" type="input" displayText="Configurazione Profilo eDelivery (2/3)" ifProperty="(${antinstaller_protocollo_as4}==true) AND (${antinstaller_as4_as}==tomcat)">

	<comment displayText="HTTP Endpoint" bold="true"/>
	<validated defaultValue="http://localhost:8080/domibus/services/msh" property="antinstaller_as4_msh" displayText="Domibus MSH URL" regex="http(s?):\/\/(.+)\/(.*)"/>
	<validated defaultValue="http://localhost:8080/domibus/services/backend" property="antinstaller_as4_backend" displayText="Domibus Backend WS URL" regex="http(s?):\/\/(.+)\/(.*)"/>

	<comment displayText="Broker JMS" bold="true"/>
	<validated defaultValue="tcp://127.0.0.1:61616" property="antinstaller_as4_jms_url" displayText="Provider URL" regex="(.+):\/\/(.+)"/>
	<validated defaultValue="admin" property="antinstaller_as4_jms_username" displayText="Username" regex="^[^ ]+$" />
	<validated defaultValue="123456" property="antinstaller_as4_jms_password" displayText="Password" regex="^[^ ]+$" />

    </page>

    <page name="preinstallazioneEDelivery2b" type="input" displayText="Configurazione Profilo eDelivery (2/3)" ifProperty="(${antinstaller_protocollo_as4}==true) AND (${antinstaller_as4_as}==wildfly12)">

	<comment displayText="HTTP Endpoint" bold="true"/>
	<validated defaultValue="http://localhost:8080/domibus-wildfly/services/msh" property="antinstaller_as4_msh" displayText="Domibus MSH URL" regex="http(s?):\/\/(.+)\/(.*)"/>
	<validated defaultValue="http://localhost:8080/domibus-wildfly/services/backend" property="antinstaller_as4_backend" displayText="Domibus Backend WS URL" regex="http(s?):\/\/(.+)\/(.*)"/>

	<comment displayText="Broker JMS" bold="true"/>
	<validated defaultValue="http-remoting://127.0.0.1:8080" property="antinstaller_as4_jms_url" displayText="Provider URL" regex="(.+):\/\/(.+)"/>
	<validated defaultValue="domibus" property="antinstaller_as4_jms_username" displayText="Username" regex="^[^ ]+$" />
	<validated defaultValue="domibus" property="antinstaller_as4_jms_password" displayText="Password" regex="^[^ ]+$" />

    </page>

    <page name="infoDB_EDelivery_oracle" type="input" displayText="Configurazione Profilo eDelivery (3/3)" ifProperty="(${antinstaller_protocollo_as4}==true) AND (${antinstaller_as4_tipo_database}==oracle)">
	<comment displayText="DBMS" bold="true"/>        
	<validated defaultValue="127.0.0.1" property="antinstaller_as4_dbhost" displayText="Hostname"
            regex=".+"/>
        <hidden property="porta-db_as4" value="1521"/>
        <hidden property="TABLESPACE_as4" value="XE"/>
        <hidden property="antinstaller_as4_driver_jdbc_classname" value="oracle.jdbc.OracleDriver"/>
	<hidden property="antinstaller_as4_driver_jdbc" value="NOME_DRIVER_JDBC.jar"/>
        <validated defaultValue="${porta-db_as4}" regex="^[0-9]{1,5}$" property="antinstaller_as4_dbport"
            displayText="Porta"/>

 	<large-select defaultValue="SID" property="antinstaller_as4_oracle_mode" displayText="Tipo Accesso">
            <option value="SID" text="SID"/>
            <option value="serviceName" text="Service Name"/>
        </large-select>
        <validated defaultValue="${TABLESPACE_as4}" property="antinstaller_as4_dbname"
            displayText="Nome Database" regex=".+"/>

        <validated defaultValue="domibus" property="antinstaller_as4_dbusername"
            displayText="Username" regex=".+"/>
        <validated defaultValue="domibus" property="antinstaller_as4_dbpassword"
            displayText="Password" regex=".+"/>

    </page>

 <page name="infoDB_EDelivery_notOracle" type="input" displayText="Configurazione Profilo eDelivery (3/3)" ifProperty="(${antinstaller_protocollo_as4}==true) AND (${antinstaller_as4_tipo_database}!=oracle)">
        <validated defaultValue="127.0.0.1" property="antinstaller_as4_dbhost" displayText="Hostname"
            regex=".+"/>
        <conditional ifProperty="${antinstaller_as4_tipo_database}=mysql">
            <hidden property="porta-db_as4" value="3306"/>
            <hidden property="TABLESPACE_as4" value="domibus"/>
            <hidden property="antinstaller_as4_driver_jdbc_classname" value="com.mysql.jdbc.Driver"/>
	    <hidden property="antinstaller_as4_driver_jdbc" value="NOME_DRIVER_JDBC.jar"/>
        </conditional>
        <validated defaultValue="${porta-db_as4}" regex="^[0-9]{1,5}$" property="antinstaller_as4_dbport"
            displayText="Porta"/>

        <validated defaultValue="${TABLESPACE_as4}" property="antinstaller_as4_dbname"
            displayText="Nome Database" regex=".+"/>

        <validated defaultValue="domibus" property="antinstaller_as4_dbusername"
            displayText="Username" regex=".+"/>
        <validated defaultValue="domibus" property="antinstaller_as4_dbpassword"
            displayText="Password" regex=".+"/>

    </page>

   <page name="Fine" displayText="Installazione" type="progress" showTargets="true"
        target="setup,setup_datasource,setup_sql,setup_pdd,setup_govwayConsole,setup_govwayMonitor,setup_loader,setup_apiConfig,setup_apiMonitor,setup_batchStatistiche,setup_batchRuntimeRepository,setup_finished"/>

</installer>
